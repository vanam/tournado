import{r as l,j as e,u as L,L as u}from"./react-vendor-Bgs-6sV-.js";import{p as h,C as v}from"./ConfirmModal-B4YHOsuj.js";import{c as m,u as j,B as f}from"./index-BFCo89aA.js";import{u as R}from"./usePageTitle-B5wq1XKa.js";import{B as S}from"./Badge-BGU97wNG.js";import{T as F,P as g,c as P}from"./icons-DzhwDsxK.js";import"./radix-ui-CVrMEJrw.js";import"./notifications-t4x-TPvG.js";const w=l.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:m("rounded-xl border border-[var(--color-border)] bg-[var(--color-card)] shadow-sm",t),...s}));w.displayName="Card";const N=l.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:m("flex flex-col space-y-1.5 p-6",t),...s}));N.displayName="CardHeader";const y=l.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:m("text-2xl font-semibold leading-none tracking-tight",t),...s}));y.displayName="CardTitle";const C=l.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:m("text-sm text-muted-foreground",t),...s}));C.displayName="CardDescription";const b=l.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:m("p-6 pt-0",t),...s}));b.displayName="CardContent";const B=l.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:m("flex items-center p-6 pt-0",t),...s}));B.displayName="CardFooter";const E=({tournament:t,onDelete:s})=>{const{t:a}=j(),x=L(),n=t.winnerId?t.players.find(r=>r.id===t.winnerId):null,c=()=>{x(`/tournament/${t.id}`)};return e.jsxs(w,{className:`group cursor-pointer hover:shadow-lg hover:border-[var(--color-primary)] hover:-translate-y-0.5 transition-all duration-200${t.winnerId?" brightness-95":""}`,role:"button",tabIndex:0,onClick:c,onKeyDown:r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),c())},children:[e.jsxs(N,{className:"p-5",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(y,{className:"text-lg font-semibold text-[var(--color-primary-dark)] group-hover:text-[var(--color-primary)] transition-colors",children:t.name}),e.jsx(f,{variant:"ghost",size:"sm",onClick:r=>{r.stopPropagation(),s(t.id)},"aria-label":a("card.delete"),className:"text-[var(--color-accent)] hover:text-[var(--color-primary-dark)] text-sm opacity-100 sm:opacity-0 sm:group-hover:opacity-100 h-auto px-2 py-1",children:e.jsx(F,{className:"h-4 w-4"})})]}),e.jsxs(C,{className:"text-sm text-[var(--color-muted)] mt-1",children:[a(`format.${t.format}`)," Â·"," ",a("tournament.players",{count:t.players.length})]}),e.jsx(S,{variant:"secondary",className:"mt-2 w-fit",children:a(`format.${t.format}`)})]}),e.jsxs(b,{className:"p-5 pt-0",children:[e.jsx("p",{className:"text-xs text-[var(--color-subtle)]",children:a("card.created",{date:new Date(t.createdAt).toLocaleDateString()})}),n&&e.jsx("p",{className:"text-xs text-[var(--color-subtle)] font-medium mt-2",children:a("card.winner",{name:n.name})})]})]})},O=()=>{const[t,s]=l.useState(()=>h.loadAll().toSorted((o,d)=>{const i=!!o.winnerId,p=!!d.winnerId;return i!==p?i?1:-1:new Date(d.createdAt).getTime()-new Date(o.createdAt).getTime()})),[a,x]=l.useState(!1),[n,c]=l.useState(null),{t:r}=j();l.useEffect(()=>h.subscribe(()=>{s(h.loadAll().toSorted((o,d)=>{const i=!!o.winnerId,p=!!d.winnerId;return i!==p?i?1:-1:new Date(d.createdAt).getTime()-new Date(o.createdAt).getTime()}))}),[]),R(r("home.title"));function D(o){return t.find(i=>i.id===o)?.name??""}function T(o){c(o)}function A(){n&&(h.delete(n),c(null))}function k(){c(null)}function I(){h.deleteAll(),x(!1)}return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-[var(--color-text)]",children:r("home.title")}),e.jsx("p",{className:"text-sm text-[var(--color-muted)] mt-1",children:r("home.cta")})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.length>1&&e.jsx(f,{onClick:()=>{x(!0)},variant:"secondary-outlined",children:r("home.deleteAll")}),e.jsx(f,{asChild:!0,children:e.jsxs(u,{to:"/create",className:"bg-[var(--color-primary)] text-[var(--color-surface)] px-5 py-2.5 rounded-lg text-sm font-medium shadow-sm hover:shadow-md hover:bg-[var(--color-primary-dark)] transition-colors inline-flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4"})," ",r("home.newTournament")]})})]})]}),t.length===0?e.jsxs("div",{className:"text-center py-16 text-[var(--color-subtle)]",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(P,{className:"h-16 w-16 text-[var(--color-faint)]"})}),e.jsx("p",{className:"text-lg font-medium mb-3",children:r("home.noTournaments")}),e.jsx(f,{asChild:!0,children:e.jsxs(u,{to:"/create",className:"inline-flex items-center gap-2 bg-[var(--color-primary)] text-[var(--color-surface)] px-6 py-3 rounded-lg text-sm font-medium shadow-sm hover:shadow-md hover:bg-[var(--color-primary-dark)] transition-colors",children:[e.jsx(g,{className:"h-4 w-4"})," ",r("home.noTournamentsDesc")]})})]}):e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:t.map(o=>e.jsx(E,{tournament:o,onDelete:T},o.id))}),n&&e.jsx(v,{title:r("home.deleteConfirm"),message:D(n),confirmLabel:r("card.delete"),cancelLabel:r("home.cancel"),onConfirm:A,onCancel:k}),a&&e.jsx(v,{title:r("home.deleteAllConfirm"),message:r("home.deleteAllDesc",{count:t.length}),confirmLabel:r("home.deleteAll"),cancelLabel:r("home.cancel"),onConfirm:I,onCancel:()=>{x(!1)}})]})};export{O as HomePage};
