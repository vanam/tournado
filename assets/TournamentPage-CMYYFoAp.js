import{r as h,j as t,b as He,m as mt,L as Q,h as xt}from"./react-vendor-B7IL4Whh.js";import{F as L,p as ne,S as C,B as ft,a as Te}from"./ConfirmModal-DlbtbYsk.js";import{c as B,u as N,D as U,B as re,a as pt}from"./index-DcEeF-Uz.js";import{u as ht}from"./usePageTitle-O1w_pC6s.js";import{e as se,f as ge,h as ae,B as J,M as K,j as Oe,S as ie,k as Ae,l as Ge,m as q,n as _e,o as ze,p as X,q as le,r as oe,s as qe,t as bt,u as Ee,i as ce,v as je,w as gt,x as Ue,y as jt,z as Ce}from"./BracketRounds-DMRapyIv.js";import{c as Je,d as Me,b as yt,X as vt,e as Nt,f as kt}from"./icons-kaZEYU8o.js";import{h as St,i as Ke,j as Ve,k as Ye}from"./radix-ui-BObq5o7x.js";import"./notifications-B5Q4qzS0.js";const Qe=h.createContext(null);function de(){const e=h.useContext(Qe);if(!e)throw new Error("useTournament must be used within TournamentProvider");return e}function Se(e){const{tournament:n,updateTournament:r,isLoading:s}=de(),a=n?.format===e?n:null,l=h.useCallback(i=>{r(o=>o.format!==e?o:i(o))},[r,e]);return{tournament:a,updateTournament:l,isLoading:s}}function wt(){const{tournament:e,updateTournament:n,isLoading:r}=de(),s=e?.format===L.GROUPS_TO_BRACKET?e:null,a=h.useCallback(l=>{n(i=>i.format!==L.GROUPS_TO_BRACKET?i:typeof l=="function"?l(i):l)},[n]);return{tournament:s,updateTournament:a,isLoading:r}}const It=({tournamentId:e,children:n})=>{const r=h.useSyncExternalStore(ne.subscribe,h.useCallback(()=>ne.load(e),[e])),s=h.useCallback(l=>{const i=ne.load(e);i&&ne.save(l(i))},[e]),a=h.useMemo(()=>({tournament:r,updateTournament:s,isLoading:!1}),[r,s]);return t.jsx(Qe.Provider,{value:a,children:n})},ue=({label:e})=>e?t.jsx("div",{className:"mb-6 bg-[var(--color-accent-soft)] border border-[var(--color-accent-border)] rounded-xl p-5 shadow-sm text-center",children:t.jsxs("p",{className:"text-xl font-bold text-[var(--color-accent)] tracking-wide",children:[t.jsx(Je,{className:"h-6 w-6 inline-block mr-2 text-[var(--color-accent)]"}),e]})}):null,Tt=St,Xe=h.forwardRef(({className:e,...n},r)=>t.jsx(Ke,{ref:r,className:B("inline-flex h-10 items-center justify-start rounded-md bg-muted p-1 text-muted-foreground",e),...n}));Xe.displayName=Ke.displayName;const Ze=h.forwardRef(({className:e,...n},r)=>t.jsx(Ve,{ref:r,className:B("inline-flex items-center justify-center whitespace-nowrap px-4 py-2.5 text-sm font-medium","border-b-2 border-transparent -mb-px transition-all","disabled:pointer-events-none disabled:opacity-40","data-[state=active]:border-[var(--color-primary)] data-[state=active]:text-[var(--color-primary)]","data-[state=inactive]:text-[var(--color-muted)] data-[state=inactive]:hover:bg-[var(--color-soft)] data-[state=inactive]:hover:rounded-sm hover:text-[var(--color-text)]",e),...n}));Ze.displayName=Ve.displayName;const Et=h.forwardRef(({className:e,...n},r)=>t.jsx(Ye,{ref:r,className:B("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...n}));Et.displayName=Ye.displayName;const Z=({tabs:e,activeId:n,onChange:r,className:s=""})=>{const a=l=>{r(l)};return t.jsx(Tt,{value:n,onValueChange:a,className:s,children:t.jsx(Xe,{className:`flex gap-1 mb-4 border-b border-[var(--color-border-soft)] overflow-x-auto overflow-y-hidden bg-transparent h-auto p-0 rounded-none ${s}`.trim(),children:e.map(l=>t.jsx(Ze,{value:l.id,className:"flex-shrink-0",children:l.label},l.id))})})},me=h.forwardRef(({className:e,...n},r)=>t.jsx("div",{className:"relative w-full overflow-auto",children:t.jsx("table",{ref:r,className:B("w-full caption-bottom text-sm",e),...n})}));me.displayName="Table";const xe=h.forwardRef(({className:e,...n},r)=>t.jsx("thead",{ref:r,className:B("[&_tr]:border-b",e),...n}));xe.displayName="TableHeader";const fe=h.forwardRef(({className:e,...n},r)=>t.jsx("tbody",{ref:r,className:B("[&_tr:last-child]:border-0",e),...n}));fe.displayName="TableBody";const Ct=h.forwardRef(({className:e,...n},r)=>t.jsx("tfoot",{ref:r,className:B("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...n}));Ct.displayName="TableFooter";const $=h.forwardRef(({className:e,...n},r)=>t.jsx("tr",{ref:r,className:B("border-b border-[var(--color-border-soft)] transition-colors hover:bg-[var(--color-soft)] data-[state=selected]:bg-muted",e),...n}));$.displayName="TableRow";const M=h.forwardRef(({className:e,...n},r)=>t.jsx("th",{ref:r,className:B("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...n}));M.displayName="TableHead";const I=h.forwardRef(({className:e,...n},r)=>t.jsx("td",{ref:r,className:B("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...n}));I.displayName="TableCell";const Mt=h.forwardRef(({className:e,...n},r)=>t.jsx("caption",{ref:r,className:B("mt-4 text-sm text-muted-foreground",e),...n}));Mt.displayName="TableCaption";function Rt(e,n){return e==null?"?":e===n||n==null?`${e}.`:`${e}.-${n}.`}function Dt(e){return e===1?"bg-[var(--color-podium-gold)] font-semibold":e===2?"bg-[var(--color-podium-silver)]":e===3?"bg-[var(--color-podium-bronze)]":""}const pe=({results:e})=>{const{t:n}=N();return!e||e.length===0?null:t.jsxs(me,{children:[t.jsx(xe,{children:t.jsxs($,{className:"border-b-2 border-[var(--color-border)]",children:[t.jsx(M,{className:"py-2.5 pr-3 text-xs uppercase tracking-wider font-semibold text-[var(--color-muted)]",children:n("results.rank")}),t.jsx(M,{className:"py-2.5 pr-3 text-xs uppercase tracking-wider font-semibold text-[var(--color-muted)]",children:n("results.player")})]})}),t.jsx(fe,{children:e.map(r=>t.jsxs($,{className:Dt(r.rankStart),children:[t.jsxs(I,{className:"py-2.5 pr-3 text-[var(--color-faint)] tabular-nums",children:[r.rankStart===1&&t.jsx(Je,{className:"h-4 w-4 inline-block mr-1 text-yellow-500"}),r.rankStart===2&&t.jsx(Me,{className:"h-4 w-4 inline-block mr-1 text-gray-400"}),r.rankStart===3&&t.jsx(Me,{className:"h-4 w-4 inline-block mr-1 text-amber-600"}),Rt(r.rankStart,r.rankEnd)]}),t.jsx(I,{className:"py-2.5 pr-3 font-medium",children:r.name})]},r.playerId))})]})};function Re(e,n){const r=(e.setsWon??0)-(e.setsLost??0),s=[e.points??0,r,e.setsWon??0];if(n===C.POINTS){const a=(e.pointsWon??0)-(e.pointsLost??0);s.push(a)}return s.join("|")}function Bt(e,n={}){const r=n.scoringMode??C.SETS,s=[];let a=0;for(;a<e.length;){const l=e[a];if(!l)break;const i=Re(l,r);let o=a+1;for(;o<e.length;){const u=e[o];if(!u||Re(u,r)!==i)break;o+=1}const d=a+1,c=o;for(let u=a;u<o;u+=1){const m=e[u];m&&s.push({...m,rankStart:d,rankEnd:c})}a=o}return s}function Pt(e,n,r={}){const s=ge(e,n,r);return Bt(s,r)}function Ft(e){const n=new Set;if(!e)return n;for(const r of e.rounds)for(const s of r)s.player1Id&&n.add(s.player1Id),s.player2Id&&n.add(s.player2Id);return n}function et(e,n){const r=new Map;let s=n;for(const a of e){if(a.length===0)continue;const l=s-a.length+1,i=s;for(const o of a)r.set(o,{rankStart:l,rankEnd:i});s=l-1}return{rankByPlayer:r}}function we(e){return[...e].toSorted((n,r)=>{const s=n.rankStart??Number.POSITIVE_INFINITY,a=r.rankStart??Number.POSITIVE_INFINITY;if(s!==a)return s-a;const l=n.rankEnd??Number.POSITIVE_INFINITY,i=r.rankEnd??Number.POSITIVE_INFINITY;return l!==i?l-i:n.name.localeCompare(r.name)})}function De(e,n){return n?e.map(r=>r.rankStart==null||r.rankEnd==null?r:{...r,rankStart:r.rankStart+n,rankEnd:r.rankEnd+n}):e}function ye(e,n){if(!e)return[];const r=new Map(n.map(c=>[c.id,c])),s=[...Ft(e)],a=[],l=new Set;for(const[c,u]of e.rounds.entries()){const m=[];for(const f of u){if(!f.winnerId||!f.player1Id||!f.player2Id)continue;const p=f.winnerId===f.player1Id?f.player2Id:f.player1Id;l.has(p)||(l.add(p),m.push(p))}a[c]=m}const{rankByPlayer:i}=et(a,s.length),o=se(e);if(o&&i.set(o,{rankStart:1,rankEnd:1}),e.thirdPlaceMatch?.winnerId){const c=e.thirdPlaceMatch,u=c.winnerId===c.player1Id?c.player2Id:c.player1Id;c.winnerId&&i.set(c.winnerId,{rankStart:3,rankEnd:3}),u&&i.set(u,{rankStart:4,rankEnd:4})}const d=s.map(c=>{const u=r.get(c);return{playerId:c,name:u?.name??c,...i.get(c)}});return we(d)}function Wt(e){const n=new Set;if(!e)return n;for(const s of e.winners.rounds)for(const a of s)a.player1Id&&n.add(a.player1Id),a.player2Id&&n.add(a.player2Id);for(const s of e.losers.rounds)for(const a of s)a.player1Id&&n.add(a.player1Id),a.player2Id&&n.add(a.player2Id);const r=e.finals;return r.grandFinal.player1Id&&n.add(r.grandFinal.player1Id),r.grandFinal.player2Id&&n.add(r.grandFinal.player2Id),r.resetFinal.player1Id&&n.add(r.resetFinal.player1Id),r.resetFinal.player2Id&&n.add(r.resetFinal.player2Id),n}function ve(e,n){if(!e)return[];const r=new Map(n.map(x=>[x.id,x])),s=[...Wt(e)],a=new Map(s.map(x=>[x,0])),l=new Set,i=e.losers.rounds,o=Array.from({length:i.length+2},()=>[]),d=x=>{if(!x?.winnerId||!x.player1Id||!x.player2Id)return;const g=x.winnerId===x.player1Id?x.player2Id:x.player1Id;a.set(g,(a.get(g)??0)+1)},c=(x,g)=>{if(!x?.winnerId||!x.player1Id||!x.player2Id)return;const b=x.winnerId===x.player1Id?x.player2Id:x.player1Id;if(l.has(b))return;const w=(a.get(b)??0)+1;if(a.set(b,w),w>=2){const k=o[g];k&&k.push(b),l.add(b)}};for(const x of e.winners.rounds)for(const g of x)d(g);for(const[x,g]of i.entries())for(const b of g)c(b,x);const u=i.length;c(e.finals.grandFinal,u),c(e.finals.resetFinal,u+1);const{rankByPlayer:m}=et(o,s.length),f=ae(e);f&&m.set(f,{rankStart:1,rankEnd:1});const p=s.map(x=>{const g=r.get(x);return{playerId:x,name:g?.name??x,...m.get(x)}});return we(p)}const Lt=()=>{const{tournament:e,updateTournament:n}=Se(L.SINGLE_ELIM),[r,s]=h.useState(null),[a,l]=h.useState("playoff"),{t:i}=N();if(!e)return null;const{bracket:o,players:d}=e,c=e.scoringMode??C.SETS,u=e.maxSets??U,m=se(o),f=o.thirdPlaceMatch,p=[{id:"playoff",label:i("tabs.playoff")},{id:"results",label:i("tabs.results")}];function x(g,b,w,k=!1){n(y=>{const S=b?Ae(structuredClone(y.bracket),g,b,w,k):Ge(structuredClone(y.bracket),g),H=se(S);return{...y,bracket:S,winnerId:H,completedAt:H?new Date().toISOString():null}}),s(null)}return t.jsxs("div",{children:[m&&t.jsx(ue,{label:i("bracket.winner",{name:d.find(g=>g.id===m)?.name??""})}),t.jsx(Z,{tabs:p,activeId:a,onChange:l}),a==="playoff"?t.jsxs(t.Fragment,{children:[t.jsx(J,{bracket:o,players:d,scoringMode:c,maxSets:u,showSeedNumbers:!0,onEditMatch:g=>{s(g)}}),f&&(f.player1Id??f.player2Id)&&t.jsxs("div",{className:"mt-6",children:[t.jsx("div",{className:"text-xs font-semibold text-[var(--color-muted)] mb-2",children:i("bracket.thirdPlace")}),t.jsx(K,{match:f,players:d,canEdit:Oe(o,f.id),onClick:()=>{s(f)},scoringMode:c,maxSets:u,roundIndex:o.rounds.length})]}),r&&t.jsx(ie,{match:r,players:d,scoringMode:c,maxSets:u,onSave:x,onClose:()=>{s(null)}})]}):t.jsx(pe,{results:ye(o,d)})]})};function Be(e){return e?e.player1Id||e.player2Id||e.winnerId?!0:Array.isArray(e.scores)&&e.scores.length>0:!1}const $t=()=>{const{tournament:e,updateTournament:n}=Se(L.DOUBLE_ELIM),{t:r}=N(),[s,a]=h.useState(null),[l,i]=h.useState("playoff"),o=e?.doubleElim,d=h.useMemo(()=>e?.players??[],[e?.players]),c=e?.scoringMode??C.SETS,u=e?.maxSets??U,m=[{id:"playoff",label:r("tabs.playoff")},{id:"results",label:r("tabs.results")}],f=h.useMemo(()=>o?ae(o):null,[o]),p=h.useMemo(()=>f?d.find(y=>y.id===f):null,[d,f]),x=o?.winners.rounds.length??0;function g(y,S,H,F=!1){o&&(n(D=>{const O=S?_e(structuredClone(D.doubleElim),y,S,H,F):ze(structuredClone(D.doubleElim),y),_=ae(O);return{...D,doubleElim:O,winnerId:_,completedAt:_?new Date().toISOString():null}}),a(null))}if(!e||!o)return null;const b=o.finals,w=Be(b.grandFinal),k=Be(b.resetFinal);return t.jsxs("div",{className:"space-y-8",children:[p&&t.jsx(ue,{label:r("bracket.winner",{name:d.find(y=>y.id===p.id)?.name??""})}),t.jsx(Z,{tabs:m,activeId:l,onChange:i}),l==="playoff"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"text-sm font-semibold text-[var(--color-muted)]",children:r("doubleElim.winnersBracket")}),t.jsx(J,{bracket:o.winners,players:d,scoringMode:c,maxSets:u,showSeedNumbers:!0,onEditMatch:y=>{a(y)},canEditMatchFn:(y,S)=>q(o,S)})]}),o.losers.rounds.length>0&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"text-sm font-semibold text-[var(--color-muted)]",children:r("doubleElim.losersBracket")}),t.jsx(J,{bracket:o.losers,players:d,scoringMode:c,maxSets:u,showSeedNumbers:!0,onEditMatch:y=>{a(y)},canEditMatchFn:(y,S)=>q(o,S)})]}),(w||k)&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"text-sm font-semibold text-[var(--color-muted)]",children:r("doubleElim.grandFinal")}),w&&t.jsx(K,{match:b.grandFinal,players:d,canEdit:q(o,b.grandFinal.id),scoringMode:c,maxSets:u,showSeedNumbers:!0,roundIndex:x,onClick:()=>{a(b.grandFinal)}}),k&&t.jsxs("div",{children:[t.jsx("div",{className:"text-xs font-semibold text-[var(--color-muted)] mb-2",children:r("doubleElim.resetFinal")}),t.jsx(K,{match:b.resetFinal,players:d,canEdit:q(o,b.resetFinal.id),scoringMode:c,maxSets:u,showSeedNumbers:!0,roundIndex:x,onClick:()=>{a(b.resetFinal)}})]})]}),s&&t.jsx(ie,{match:s,players:d,scoringMode:c,maxSets:u,onSave:g,onClose:()=>{a(null)}})]}):t.jsx(pe,{results:ve(o,d)})]})};function Ht(e,n,r,s){const a=n.filter(o=>o==="headToHead"||o==="headToHeadSetDiff"||o==="headToHeadSetsWon"||o==="setDiff"||o==="setsWon"||o==="pointsDiff"),l={headToHead:r("roundRobin.tiebreakH2H"),headToHeadSetDiff:r("roundRobin.tiebreakH2HSetDiff"),headToHeadSetsWon:r("roundRobin.tiebreakH2HSetsWon"),setDiff:r("roundRobin.tiebreakSetDiff"),setsWon:r("roundRobin.tiebreakSetsWon"),pointsDiff:r("roundRobin.tiebreakPointsDiff")},i={headToHead:r("roundRobin.tiebreakH2HHelp"),headToHeadSetDiff:r("roundRobin.tiebreakH2HSetDiffHelp"),headToHeadSetsWon:r("roundRobin.tiebreakH2HSetsWonHelp"),setDiff:r("roundRobin.tiebreakSetDiffHelp"),setsWon:r("roundRobin.tiebreakSetsWonHelp"),pointsDiff:r("roundRobin.tiebreakPointsDiffHelp")};return a.filter(o=>s||o!=="pointsDiff").map(o=>{let d="-";return o==="headToHead"&&(d=String(e.headToHead)),o==="headToHeadSetDiff"&&(d=be(e.headToHeadSetDiff)),o==="headToHeadSetsWon"&&(d=String(e.headToHeadSetsWon)),o==="setDiff"&&(d=be(e.setDiff)),o==="setsWon"&&(d=String(e.setsWon)),o==="pointsDiff"&&(d=be(e.pointsDiff)),{key:o,label:l[o],value:d,help:i[o]}})}function be(e){const n=e.toFixed(0);return e>0?`+${n}`:n}const Ot=({details:e,applied:n,t:r,showBalls:s})=>{const a=Ht(e,n,r,s);return a.length===0?null:t.jsx("table",{className:"w-full text-[0.7rem] text-[var(--color-muted)]",children:t.jsx("tbody",{children:a.map(l=>t.jsxs($,{className:"border-t border-[var(--color-border-soft)]",children:[t.jsx(I,{className:"py-1 pr-2 font-medium p-0",children:t.jsx("span",{className:"underline decoration-dotted underline-offset-2 cursor-help",title:l.help,children:l.label})}),t.jsx(I,{className:"py-1 text-right p-0",children:l.value})]},l.key))})})},At=({isExpanded:e})=>t.jsx("span",{className:"mr-1 inline-flex h-3 w-3 items-center justify-center text-[var(--color-muted)]","aria-hidden":"true",children:t.jsx("svg",{viewBox:"0 0 20 20",className:`h-3 w-3 transition-transform ${e?"rotate-90":"rotate-0"}`,fill:"currentColor",children:t.jsx("path",{d:"M7.5 5.5 12.5 10 7.5 14.5"})})}),Gt=({name:e,isWildCard:n,elo:r,t:s})=>t.jsx(I,{className:"py-2.5 pr-3 font-medium",children:t.jsxs("span",{className:"inline-flex items-center gap-2",children:[t.jsx("span",{children:e}),n&&t.jsx(ft,{variant:"accent",className:"text-[10px] px-1.5 py-0.5",children:s("groupStage.wildCardBadge")}),r!=null&&t.jsx("span",{className:"text-xs font-normal text-[var(--color-muted)]",children:s("players.elo",{elo:r})})]})}),_t=({tiebreakDetails:e,rowClass:n,colSpan:r,t:s,showBalls:a})=>t.jsx($,{className:n,children:t.jsx(I,{className:"px-2",colSpan:r,children:t.jsx(Ot,{details:e,applied:e.tiebreakApplied,t:s,showBalls:a})})}),zt=({row:e,rank:n,isDirectQualifier:r,isWildCard:s,hasTiebreak:a,isExpanded:l,showBalls:i,onToggleExpand:o,t:d})=>{let c="";r?c="bg-[var(--color-soft)]":s&&(c="bg-[var(--color-accent-soft)]");const u=f=>{(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),o())},m=i?8:7;return t.jsxs(h.Fragment,{children:[t.jsxs($,{className:`transition-colors ${c} ${a?"cursor-pointer":""}`,onClick:a?o:void 0,onKeyDown:a?u:void 0,role:a?"button":void 0,tabIndex:a?0:void 0,"aria-expanded":a?l:void 0,children:[t.jsxs(I,{className:"py-2.5 pr-3 text-[var(--color-faint)] tabular-nums",children:[a&&t.jsx(At,{isExpanded:l}),n]}),t.jsx(Gt,{name:e.name,isWildCard:s,elo:e.elo,t:d}),t.jsx(I,{className:"py-2.5 pr-3 text-center tabular-nums",children:e.played}),t.jsx(I,{className:"py-2.5 pr-3 text-center tabular-nums",children:e.wins}),t.jsx(I,{className:"py-2.5 pr-3 text-center tabular-nums",children:e.losses}),t.jsxs(I,{className:"py-2.5 pr-3 text-center tabular-nums",children:[e.setsWon,"-",e.setsLost]}),i&&t.jsxs(I,{className:"py-2.5 pr-3 text-center tabular-nums",children:[e.pointsWon,"-",e.pointsLost]}),t.jsx(I,{className:"py-2.5 text-center font-semibold tabular-nums",children:e.points})]}),l&&e.tiebreakDetails&&t.jsx(_t,{tiebreakDetails:e.tiebreakDetails,rowClass:c,colSpan:m,t:d,showBalls:i})]})},tt=({standings:e,highlightCount:n=0,wildCardIds:r,scoringMode:s=C.SETS})=>{const{t:a}=N(),[l,i]=h.useState(null),o=Math.max(0,Number.parseInt(String(n),10)||0),d=e.length===1&&o>0,c=s===C.POINTS;return t.jsxs(me,{children:[t.jsx(xe,{children:t.jsxs($,{className:"border-b-2 border-[var(--color-border)]",children:[t.jsx(M,{className:"py-2.5 pr-2 sm:pr-3 text-xs uppercase tracking-wider font-semibold whitespace-nowrap text-[var(--color-muted)]",children:a("standings.rank")}),t.jsx(M,{className:"py-2.5 pr-2 sm:pr-3 text-xs uppercase tracking-wider font-semibold whitespace-nowrap text-[var(--color-muted)]",children:a("standings.player")}),t.jsx(M,{className:"py-2.5 pr-2 sm:pr-3 text-center text-xs uppercase tracking-wider font-semibold whitespace-nowrap text-[var(--color-muted)]",children:a("standings.played")}),t.jsx(M,{className:"py-2.5 pr-2 sm:pr-3 text-center text-xs uppercase tracking-wider font-semibold whitespace-nowrap text-[var(--color-muted)]",children:a("standings.wins")}),t.jsx(M,{className:"py-2.5 pr-2 sm:pr-3 text-center text-xs uppercase tracking-wider font-semibold whitespace-nowrap text-[var(--color-muted)]",children:a("standings.losses")}),t.jsx(M,{className:"py-2.5 pr-2 sm:pr-3 text-center text-xs uppercase tracking-wider font-semibold whitespace-nowrap text-[var(--color-muted)]",children:a("standings.sets")}),c&&t.jsx(M,{className:"py-2.5 pr-2 sm:pr-3 text-center text-xs uppercase tracking-wider font-semibold whitespace-nowrap text-[var(--color-muted)]",children:a("standings.balls")}),t.jsx(M,{className:"py-2.5 text-center text-xs uppercase tracking-wider font-semibold whitespace-nowrap text-[var(--color-muted)]",children:a("standings.points")})]})}),t.jsx(fe,{children:e.map((u,m)=>{const f=(u.played>0||d)&&(m===0||o>0&&m<o),p=r?.has(u.playerId)??!1,x=u.tiebreakDetails!=null&&u.tiebreakDetails.tiebreakApplied.length>0,g=l===u.playerId,b=()=>{i(w=>w===u.playerId?null:u.playerId)};return t.jsx(zt,{row:u,rank:m+1,isDirectQualifier:f,isWildCard:p,hasTiebreak:x,isExpanded:g,showBalls:c,onToggleExpand:b,t:a},u.playerId)})})]})};function qt(e,n,r){const s=[n,r].toSorted((a,l)=>a.localeCompare(l)).join("|");return e.get(s)}function Ut(e,n){return e.filter(r=>Array.isArray(r)).map(r=>{const s=r[0],a=r[1];if(oe(s)||oe(a)){const o=qe(s,a);return o===0?null:{text:"WO",isWin:n?o===2:o===1}}const l=n?a:s,i=n?s:a;return!Number.isFinite(l)||!Number.isFinite(i)?null:{text:`${l}-${i}`,isWin:l>i}}).filter(r=>r!=null)}const Jt=({players:e})=>t.jsx(xe,{children:t.jsxs($,{className:"border-b-0 hover:bg-transparent",children:[t.jsx(M,{className:"py-2 pr-3 sticky left-0 z-10"}),e.map(n=>t.jsx(M,{className:"py-2 pr-3 text-left font-medium text-[var(--color-text)] sticky left-0 z-10 whitespace-nowrap",children:n.name},n.id))]})}),Kt=({rowPlayer:e,colPlayer:n,match:r,showPoints:s,scoringMode:a,maxSets:l})=>{if(e.id===n.id)return t.jsx(I,{className:"py-2 px-2 text-center bg-[var(--color-soft)] text-[var(--color-faint)]",children:"-"});if(!r||r.scores.length===0){if(r?.walkover||X(r?.scores??[])){const p=r?.winnerId===e.id;return t.jsx(I,{className:`py-2 px-2 text-center ${p?"font-semibold":"text-[var(--color-muted)]"}`,children:t.jsx("div",{className:"font-mono text-xs",children:"WO"})})}return t.jsx(I,{className:"py-2 px-2 text-center text-[var(--color-faintest)]",children:"-"})}const i=r.player1Id!==e.id,{p1Sets:o,p2Sets:d}=le(r.scores,{scoringMode:a,maxSets:l}),c=i?`${d}-${o}`:`${o}-${d}`,u=r.walkover||X(r.scores);let m;r.winnerId?m=r.winnerId===e.id:i?m=d>o:m=o>d;const f=s?Ut(r.scores,i):[];return t.jsxs(I,{className:"py-2 px-2 text-center",children:[t.jsx("div",{className:`font-mono text-xs ${m?"font-semibold":"text-[var(--color-text)]"}`,children:u?c+" WO":c}),s&&f.length>0&&t.jsx("div",{className:"text-[10px] text-[var(--color-faint)]",children:f.map((p,x)=>t.jsxs("span",{className:p.isWin?"font-semibold":"",children:[x>0?", ":"",p.text]},`set-${x}`))})]})},Vt=({rowPlayer:e,players:n,matchIndex:r,showPoints:s,scoringMode:a,maxSets:l})=>t.jsxs($,{children:[t.jsx(M,{className:"py-2 pr-3 text-left font-medium text-[var(--color-text)] sticky left-0 z-10 whitespace-nowrap",children:e.name}),n.map(i=>{const o=qt(r,e.id,i.id);return t.jsx(Kt,{rowPlayer:e,colPlayer:i,match:o,showPoints:s,scoringMode:a,maxSets:l},i.id)})]}),nt=({players:e,schedule:n,scoringMode:r=C.SETS,maxSets:s})=>{const a=r===C.POINTS,l=h.useMemo(()=>{const i=new Map;for(const o of n.rounds)for(const d of o.matches){const c=[d.player1Id,d.player2Id].toSorted((u,m)=>u===null&&m===null?0:u===null?1:m===null?-1:u.localeCompare(m)).join("|");i.set(c,d)}return i},[n]);return t.jsxs(me,{className:"border-separate border-spacing-0",children:[t.jsx(Jt,{players:e}),t.jsx(fe,{children:e.map(i=>t.jsx(Vt,{rowPlayer:i,players:e,matchIndex:l,showPoints:a,scoringMode:r,maxSets:s},i.id))})]})},Yt=({match:e,players:n,onEdit:r,scoringMode:s=C.SETS,maxSets:a})=>{const{t:l}=N(),i=n.find(x=>x.id===e.player1Id),o=n.find(x=>x.id===e.player2Id),d=s===C.POINTS,{p1Sets:c,p2Sets:u}=le(e.scores,{scoringMode:s,maxSets:a}),m=e.walkover||X(e.scores),f=d?bt(e.scores):"",p=d?e.scores.filter(x=>Array.isArray(x)).map(x=>Qt(x,e)).filter(x=>x!=null):[];return t.jsxs("div",{onClick:()=>{r(e)},className:"flex items-center gap-3 border border-[var(--color-border)] bg-[var(--color-card)] rounded-lg px-3 py-2.5 cursor-pointer hover:border-[var(--color-primary)] hover:shadow-md hover:-translate-y-px transition-all duration-150 text-sm",role:"button",tabIndex:0,"aria-label":l("bracket.editMatch"),onKeyDown:x=>{(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),r(e))},children:[t.jsx("span",{className:`flex-1 text-right min-w-0 truncate text-xs sm:text-sm ${e.winnerId===e.player1Id?"font-semibold text-[var(--color-primary-dark)]":""}`,children:i?t.jsxs(t.Fragment,{children:[i.name,i.elo!=null&&t.jsx("span",{className:"ml-2 text-xs font-normal text-[var(--color-muted)]",children:l("players.elo",{elo:i.elo})})]}):null}),e.winnerId?t.jsxs("div",{className:"text-center min-w-[3rem]",children:[t.jsx("div",{className:"text-[var(--color-muted)] font-mono text-xs px-2 py-0.5 rounded bg-[var(--color-soft)]",children:m?"WO":`${c} - ${u}`}),d&&f&&t.jsx("div",{className:"text-[10px] text-[var(--color-faint)]",children:p.map((x,g)=>t.jsxs("span",{className:x.isWinnerSet?"font-semibold text-[var(--color-text)]":"",children:[g>0?", ":"",x.text]},`set-${g}`))})]}):t.jsx("span",{className:"text-[var(--color-faintest)] text-xs min-w-[3rem] text-center",children:l("score.vs")}),t.jsx("span",{className:`flex-1 min-w-0 truncate text-xs sm:text-sm ${e.winnerId===e.player2Id?"font-semibold text-[var(--color-primary-dark)]":""}`,children:o?t.jsxs(t.Fragment,{children:[o.name,o.elo!=null&&t.jsx("span",{className:"ml-2 text-xs font-normal text-[var(--color-muted)]",children:l("players.elo",{elo:o.elo})})]}):null})]})};function Qt(e,n){const[r,s]=e;if(oe(r)||oe(s)){const d=qe(r,s);if(d===0)return{text:"WO",isWinnerSet:!1};const c=d===1?n.player1Id:n.player2Id;return{text:"WO",isWinnerSet:n.winnerId!=null&&n.winnerId===c}}const a=r,l=s;if(!Number.isFinite(a)||!Number.isFinite(l))return null;let i=0;a>l?i=1:l>a&&(i=2);let o=!1;return i===1?o=n.winnerId===n.player1Id:i===2&&(o=n.winnerId===n.player2Id),{text:`${a}-${l}`,isWinnerSet:o}}const rt=({schedule:e,players:n,onEditMatch:r,scoringMode:s=C.SETS,maxSets:a})=>{const{t:l}=N();return t.jsx("div",{className:"space-y-6",children:e.rounds.map(i=>{const o=i.byePlayerId?n.find(d=>d.id===i.byePlayerId):null;return t.jsxs("div",{children:[t.jsxs("h3",{className:"text-sm font-semibold text-[var(--color-muted)] mb-2",children:[l("roundRobin.round",{n:i.roundNumber}),o&&t.jsx("span",{className:"text-[var(--color-faint)] font-normal ml-2",children:l("roundRobin.bye",{name:o.elo==null?o.name:`${o.name} (${l("players.elo",{elo:o.elo})})`})})]}),t.jsx("div",{className:"space-y-2",children:i.matches.map(d=>t.jsx(Yt,{match:d,players:n,onEdit:r,scoringMode:s,maxSets:a},d.id))})]},i.roundNumber)})})};function Xt(e){const n=new Map;for(const r of e.rounds)for(const s of r.matches){if(s.dummy)continue;const a=[s.player1Id,s.player2Id].toSorted((l,i)=>l===null&&i===null?0:l===null?1:i===null?-1:l.localeCompare(i)).join("|");n.set(a,s)}return n}function Zt(e,n,r){const s=[n,r].toSorted((a,l)=>a.localeCompare(l)).join("|");return e.get(s)}function en(e,n,r,s){if(!n)return{text:"",bold:!1};if(n.scores.length===0&&!n.walkover)return{text:"",bold:!1};const a=n.walkover||X(n.scores),l=n.player1Id!==e.id,{p1Sets:i,p2Sets:o}=le(n.scores,{scoringMode:r,maxSets:s}),d=l?`${o}-${i}`:`${i}-${o}`;let c;return n.winnerId?c=n.winnerId===e.id:l?c=o>i:c=i>o,{text:a?`${d} WO`:d,bold:c}}function tn(e,n,r,s){const a=n.find(f=>f.id===e.player1Id),l=n.find(f=>f.id===e.player2Id),i=a?.name??"?",o=l?.name??"?";if(e.scores.length===0&&!e.walkover)return`${i} – ${o}`;const d=e.walkover||X(e.scores),{p1Sets:c,p2Sets:u}=le(e.scores,{scoringMode:r,maxSets:s}),m=d?`${c}-${u} WO`:`${c}-${u}`;return`${i} – ${o}: ${m}`}const V={border:"1px solid #555",padding:"2px 4px",fontSize:"10px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle"},st=({groupLabel:e,players:n,schedule:r,scoringMode:s,maxSets:a})=>{const{t:l}=N(),i=h.useMemo(()=>Xt(r),[r]),o=`${(100/(n.length+1)).toFixed(3)}%`,d=Math.min(Math.max(r.rounds.length,1),4);return t.jsxs("div",{style:{fontFamily:"Arial, Helvetica, sans-serif",color:"#000",backgroundColor:"#fff",height:"190mm",overflow:"hidden",display:"flex",flexDirection:"column",gap:"2mm",boxSizing:"border-box"},children:[t.jsx("div",{style:{flexShrink:0,fontWeight:"bold",fontSize:"13px"},children:e}),t.jsx("div",{style:{flexShrink:0},children:t.jsxs("table",{style:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse"},children:[t.jsx("colgroup",{children:Array.from({length:n.length+1}).map((c,u)=>t.jsx("col",{style:{width:o}},u))}),t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:{...V,textAlign:"left",backgroundColor:"#f0f0f0"}}),n.map(c=>t.jsx("th",{style:{...V,fontWeight:"bold",backgroundColor:"#f0f0f0"},children:c.name},c.id))]})}),t.jsx("tbody",{children:n.map(c=>t.jsxs("tr",{children:[t.jsx("th",{style:{...V,textAlign:"left",fontWeight:"bold",backgroundColor:"#f0f0f0"},children:c.name}),n.map(u=>{if(c.id===u.id)return t.jsx("td",{style:{...V,backgroundColor:"#d8d8d8"},children:"×"},u.id);const m=Zt(i,c.id,u.id),{text:f,bold:p}=en(c,m,s,a);return t.jsx("td",{style:{...V,fontWeight:p?"bold":"normal"},children:f},u.id)})]},c.id))})]})}),t.jsx("hr",{style:{flexShrink:0,border:"none",borderTop:"1px solid #999",margin:"0"}}),t.jsxs("div",{style:{flex:"1 1 auto",overflow:"hidden"},children:[t.jsx("div",{style:{fontWeight:"bold",fontSize:"10px",marginBottom:"1mm"},children:l("roundRobin.schedule")}),t.jsx("div",{style:{columnCount:d,columnGap:"5mm",fontSize:"9px",lineHeight:"1.5"},children:r.rounds.map(c=>{const u=c.byePlayerId?n.find(f=>f.id===c.byePlayerId):null,m=c.matches.filter(f=>!f.dummy&&f.player1Id!=null&&f.player2Id!=null);return t.jsxs("div",{style:{breakInside:"avoid",marginBottom:"1.5mm"},children:[t.jsxs("div",{style:{fontWeight:"bold",marginBottom:"0.5mm"},children:[l("roundRobin.round",{n:c.roundNumber}),u!=null&&t.jsxs("span",{style:{fontWeight:"normal"},children:[" ",l("roundRobin.bye",{name:u.name})]})]}),m.map(f=>t.jsx("div",{style:{paddingLeft:"3mm"},children:tn(f,n,s,a)},f.id))]},c.roundNumber)})})]})]})},nn=()=>{const{tournament:e,updateTournament:n}=Se(L.ROUND_ROBIN),[r,s]=h.useState("standings"),[a,l]=h.useState(null),[i,o]=h.useState(null),{t:d}=N();h.useEffect(()=>{if(i===null)return;const k=()=>{o(null)};return window.addEventListener("afterprint",k,{once:!0}),window.print(),()=>{window.removeEventListener("afterprint",k)}},[i]);const c=h.useCallback(()=>{e&&o({groupLabel:e.name,players:e.players,schedule:e.schedule,scoringMode:e.scoringMode??C.SETS,maxSets:e.maxSets??U})},[e]);if(!e)return null;const{schedule:u,players:m}=e,f=e.scoringMode??C.SETS,p=e.maxSets??U,x=ge(u,m,{scoringMode:f,maxSets:p}),g=Ee(u),b=[{id:"standings",label:d("roundRobin.standings")},{id:"matrix",label:d("roundRobin.matrix")},{id:"schedule",label:d("roundRobin.schedule")},{id:"results",label:d("roundRobin.results")}];function w(k,y,S,H=!1){n(F=>{const D=structuredClone(F.schedule);for(const he of D.rounds){const z=he.matches.find(ee=>ee.id===k);if(z){z.winnerId=y,z.scores=S,z.walkover=H;break}}const O=Ee(D),_=O?ge(D,F.players,{scoringMode:f,maxSets:p}):null;return{...F,schedule:D,winnerId:O?_?.[0]?.playerId??null:null,completedAt:O?new Date().toISOString():null}}),l(null)}return t.jsxs("div",{children:[g&&t.jsx(ue,{label:d("roundRobin.winner",{name:x[0]?.name??""})}),t.jsx(Z,{tabs:b,activeId:r,onChange:s}),r==="schedule"?t.jsx(rt,{schedule:u,players:m,onEditMatch:l,scoringMode:f,maxSets:p}):t.jsxs(t.Fragment,{children:[r==="standings"&&t.jsx(tt,{standings:x,scoringMode:f}),r==="matrix"&&t.jsxs("div",{className:"mt-6",children:[t.jsx("div",{className:"flex justify-end mb-2",children:t.jsx("button",{onClick:c,title:d("roundRobin.print"),className:"p-1 rounded text-[var(--color-muted)] hover:text-[var(--color-text)] hover:bg-[var(--color-soft)] transition-colors","aria-label":d("roundRobin.print"),children:t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[t.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),t.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),t.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]})})}),t.jsx(nt,{schedule:u,players:m,scoringMode:f,maxSets:p})]}),r!=="standings"&&r!=="matrix"&&t.jsx("div",{className:"mt-6",children:t.jsx(pe,{results:Pt(u,m,{scoringMode:f})})})]}),a&&t.jsx(ie,{match:a,players:m,scoringMode:f,maxSets:p,onSave:w,onClose:()=>{l(null)}}),(()=>{const k=document.querySelector("#print-root");return i!==null&&k!==null?He.createPortal(t.jsx(st,{...i}),k):null})()]})},rn=()=>{const{tournament:e,updateTournament:n}=de(),{t:r}=N(),[s,a]=h.useState(null),[l,i]=h.useState(""),[o,d]=h.useState("");if(!e)return t.jsx("div",{className:"mb-6"});const{players:c}=e;function u(p){a(p.id),i(p.name),d("")}function m(){a(null),i(""),d("")}function f(p){const x=l.trim();if(!x){d(r("tournament.nameEmpty"));return}if(c.some(g=>g.id!==p&&g.name.toLowerCase()===x.toLowerCase())){d(r("tournament.nameDuplicate"));return}n(g=>({...g,players:g.players.map(b=>b.id===p?{...b,name:x}:b)})),a(null),i(""),d("")}return t.jsxs("div",{className:"mb-6",children:[t.jsxs("h3",{className:"text-sm font-semibold text-[var(--color-muted)] mb-2",children:[r("tournament.playersList")," (",c.length,")"]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(p=>t.jsx("div",{children:s===p.id?t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("input",{type:"text",id:`edit-player-${p.id}`,"aria-label":r("tournament.editName"),value:l,onChange:x=>{i(x.target.value),d("")},onKeyDown:x=>{x.key==="Enter"&&f(p.id),x.key==="Escape"&&m()},className:`border rounded px-2 py-1 text-sm w-32 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] bg-[var(--color-card)] ${o?"border-[var(--color-accent-border)]":"border-[var(--color-border)]"}`}),t.jsx("button",{onClick:()=>{f(p.id)},className:"text-[var(--color-primary)] hover:text-[var(--color-primary-dark)] text-sm px-1",title:r("tournament.saveName"),children:t.jsx(yt,{className:"h-3.5 w-3.5"})}),t.jsx("button",{onClick:m,className:"text-[var(--color-faint)] hover:text-[var(--color-muted)] text-sm px-1",title:r("tournament.cancelEdit"),children:t.jsx(vt,{className:"h-3.5 w-3.5"})})]}):t.jsxs("button",{type:"button",onClick:()=>{u(p)},className:"inline-flex items-center gap-2 bg-[var(--color-soft)] border border-[var(--color-border)] rounded-full px-3 py-1 text-sm text-[var(--color-text)] cursor-pointer hover:bg-[var(--color-soft)] hover:border-[var(--color-primary)] transition-colors",title:r("tournament.editName"),"aria-label":r("tournament.editName"),children:[t.jsx("span",{className:"truncate",children:p.name}),p.elo!=null&&t.jsx("span",{className:"text-xs font-normal text-[var(--color-muted)]",children:r("players.elo",{elo:p.elo})})]})},p.id))}),o&&t.jsx("p",{className:"text-[var(--color-accent)] text-xs mt-1",children:o})]})},at=({player:e,groupLabel:n,tagType:r})=>{const{t:s}=N(),a={qualifier:"bg-[var(--color-soft)] text-[var(--color-primary-dark)]",lucky:"bg-[var(--color-accent-soft)] text-[var(--color-accent)]"},l={qualifier:s("groupStage.advancerQualifierTag"),lucky:s("groupStage.advancerLuckyTag")};return t.jsxs("li",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-[var(--color-text)]",children:e.name}),t.jsx("div",{className:"text-xs text-[var(--color-muted)]",children:s("groupStage.advancerGroupRank",{group:n,rank:e.groupRank})})]}),t.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${a[r]}`,children:l[r]})]})},sn=({qualifiers:e,groupLabelById:n})=>{const{t:r}=N();return t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"text-xs font-semibold text-[var(--color-muted)] uppercase tracking-wide",children:r("groupStage.qualifiersTitle")}),t.jsx("ul",{className:"space-y-2",children:e.map(s=>t.jsx(at,{player:s,groupLabel:n.get(s.groupId)??s.groupId,tagType:"qualifier"},s.id))})]})},an=({luckyLosers:e,hasLucky:n,groupLabelById:r})=>{const{t:s}=N();return t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"text-xs font-semibold text-[var(--color-muted)] uppercase tracking-wide",children:s("groupStage.luckyLosersTitle")}),n?t.jsx("ul",{className:"space-y-2",children:e.map(a=>t.jsx(at,{player:a,groupLabel:r.get(a.groupId)??a.groupId,tagType:"lucky"},a.id))}):t.jsx("div",{className:"text-xs text-[var(--color-muted)]",children:s("groupStage.luckyLosersNone")})]})};function on(e){return Number.isFinite(e)?`${(e*100).toFixed(1)}%`:"0%"}function Ne(e){return Number.isFinite(e)?e.toFixed(2):"0.00"}function Pe(e){const n=Ne(e);return e>0?`+${n}`:n}function ln(e,n,r){const s=e.tiebreakDetails,a=Array.isArray(e.tiebreakApplied)?e.tiebreakApplied.filter(o=>o==="setsWonPerMatch"||o==="setDiffPerMatch"||o==="pointsDiffPerMatch"||o==="opponentAvgRank"||o==="relativeRank"||o==="fairPlay"||o==="lottery"):[],l={setsWonPerMatch:n("groupStage.luckyCriteriaSetsWon"),setDiffPerMatch:n("groupStage.luckyCriteriaSetDiff"),pointsDiffPerMatch:n("groupStage.luckyCriteriaPointsDiff"),opponentAvgRank:n("groupStage.luckyCriteriaOpponentRank"),relativeRank:n("groupStage.luckyCriteriaRelativeRank"),fairPlay:n("groupStage.luckyCriteriaFairPlay"),lottery:n("groupStage.luckyCriteriaLottery")},i={setsWonPerMatch:n("groupStage.luckyCriteriaSetsWonHelp"),setDiffPerMatch:n("groupStage.luckyCriteriaSetDiffHelp"),pointsDiffPerMatch:n("groupStage.luckyCriteriaPointsDiffHelp"),opponentAvgRank:n("groupStage.luckyCriteriaOpponentRankHelp"),relativeRank:n("groupStage.luckyCriteriaRelativeRankHelp"),fairPlay:n("groupStage.luckyCriteriaFairPlayHelp"),lottery:n("groupStage.luckyCriteriaLotteryHelp")};return a.filter(o=>r||o!=="pointsDiffPerMatch").map(o=>{let d="-";return o==="setsWonPerMatch"&&(d=Ne(s.setsWonPerMatch)),o==="setDiffPerMatch"&&(d=Pe(s.setDiffPerMatch)),o==="pointsDiffPerMatch"&&(d=Pe(s.pointsDiffPerMatch)),o==="opponentAvgRank"&&(d=Ne(s.opponentAvgRank)),o==="relativeRank"&&(d=on(s.relativeRank)),o==="fairPlay"&&(d=s.fairPlay?n("groupStage.luckyCriteriaYes"):n("groupStage.luckyCriteriaNo")),o==="lottery"&&(d=n("groupStage.luckyCriteriaApplied")),{key:o,label:l[o],value:d,help:i[o]}})}const cn=({player:e,showBalls:n})=>{const{t:r}=N(),s=ln(e,r,n);return s.length===0?null:t.jsx("table",{className:"w-full text-[0.7rem] text-[var(--color-muted)]",children:t.jsx("tbody",{children:s.map(a=>t.jsxs("tr",{className:"border-t border-[var(--color-border-soft)]",children:[t.jsx("td",{className:"py-1 pr-2 font-medium",children:t.jsx("span",{className:"underline decoration-dotted underline-offset-2 cursor-help",title:a.help,children:a.label})}),t.jsx("td",{className:"py-1 text-right",children:a.value})]},a.key))})})},dn=({player:e,index:n,groupLabel:r,isLucky:s,showBalls:a,isExpanded:l,onToggle:i})=>{const{t:o}=N(),d=e.stats,c=s?"bg-[var(--color-accent-soft)]":"",u=a?9:8;return t.jsxs(h.Fragment,{children:[t.jsxs("tr",{className:`border-b border-[var(--color-border-soft)] ${c} cursor-pointer`,onClick:i,onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),i())},role:"button",tabIndex:0,"aria-expanded":l,children:[t.jsxs("td",{className:"py-2 pr-2 text-[var(--color-faint)]",children:[t.jsx("span",{className:"mr-1 inline-flex h-3 w-3 items-center justify-center text-[var(--color-muted)]","aria-hidden":"true",children:t.jsx("svg",{viewBox:"0 0 20 20",className:`h-3 w-3 transition-transform ${l?"rotate-90":"rotate-0"}`,fill:"currentColor",children:t.jsx("path",{d:"M7.5 5.5 12.5 10 7.5 14.5"})})}),n+1]}),t.jsx("td",{className:"py-2 pr-2 font-medium text-[var(--color-text)]",children:e.name}),t.jsx("td",{className:"py-2 pr-2 text-[var(--color-muted)]",children:o("groupStage.advancerGroupRank",{group:r,rank:e.groupRank})}),t.jsx("td",{className:"py-2 pr-2 text-center",children:d.played??0}),t.jsx("td",{className:"py-2 pr-2 text-center",children:d.wins??0}),t.jsx("td",{className:"py-2 pr-2 text-center",children:d.losses??0}),t.jsxs("td",{className:"py-2 pr-2 text-center",children:[d.setsWon??0,"-",d.setsLost??0]}),a&&t.jsxs("td",{className:"py-2 pr-2 text-center",children:[d.pointsWon??0,"-",d.pointsLost??0]}),t.jsx("td",{className:"py-2 text-center font-semibold",children:d.points??0})]}),l&&t.jsx("tr",{className:`border-b border-[var(--color-border-soft)] ${c}`,children:t.jsx("td",{className:"px-2",colSpan:u,children:t.jsx(cn,{player:e,showBalls:a})})})]})},un=({candidates:e,luckyIdSet:n,groupLabelById:r,showBalls:s,expandedId:a,onToggleExpand:l})=>{const{t:i}=N();return t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"text-xs font-semibold text-[var(--color-muted)] uppercase tracking-wide",children:i("groupStage.luckyCandidatesTitle")}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-xs",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-[var(--color-border-soft)] text-left text-[var(--color-muted)]",children:[t.jsx("th",{className:"py-2 pr-2",children:i("standings.rank")}),t.jsx("th",{className:"py-2 pr-2",children:i("standings.player")}),t.jsx("th",{className:"py-2 pr-2",children:i("standings.group")}),t.jsx("th",{className:"py-2 pr-2 text-center",children:i("standings.played")}),t.jsx("th",{className:"py-2 pr-2 text-center",children:i("standings.wins")}),t.jsx("th",{className:"py-2 pr-2 text-center",children:i("standings.losses")}),t.jsx("th",{className:"py-2 pr-2 text-center",children:i("standings.sets")}),s&&t.jsx("th",{className:"py-2 pr-2 text-center",children:i("standings.balls")}),t.jsx("th",{className:"py-2 text-center",children:i("standings.points")})]})}),t.jsx("tbody",{children:e.map((o,d)=>t.jsx(dn,{player:o,index:d,groupLabel:r.get(o.groupId)??o.groupId,isLucky:n.has(o.id),showBalls:s,isExpanded:a===o.id,onToggle:()=>{l(o.id)}},o.id))})]})})]})},mn=({qualifiers:e,luckyLosers:n,luckyCandidates:r=[],groups:s,bracketTargetSize:a,scoringMode:l=C.SETS})=>{const{t:i}=N(),[o,d]=h.useState(null),c=h.useMemo(()=>{const g=new Map;for(const[b,w]of s.entries())g.set(w.id,i("groupStage.groupTitle",{label:ce(b)}));return g},[s,i]),u=h.useMemo(()=>new Set(n.map(g=>g.id)),[n]),m=l===C.POINTS,f=n.length>0,p=r.length>0;if(e.length===0&&!f)return null;const x=g=>{d(b=>b===g?null:g)};return t.jsxs("div",{className:"border border-[var(--color-border)] rounded-xl p-4 space-y-4 bg-[var(--color-card)]",children:[t.jsx("div",{className:"text-sm font-semibold text-[var(--color-muted)]",children:i("groupStage.advancersTitle")}),f&&t.jsx("div",{className:"text-xs text-[var(--color-muted)]",children:i("groupStage.luckyLoserNote",{target:a})}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[t.jsx(sn,{qualifiers:e,groupLabelById:c}),t.jsxs("div",{className:"space-y-4",children:[t.jsx(an,{luckyLosers:n,hasLucky:f,groupLabelById:c}),f&&p&&t.jsx(un,{candidates:r,luckyIdSet:u,groupLabelById:c,showBalls:m,expandedId:o,onToggleExpand:x})]})]})]})},xn=({group:e,groupIndex:n,groupPlayers:r,standings:s,qualifierCount:a,wildCardIds:l,activeTab:i,onTabChange:o,onEditMatch:d,onPrint:c,scoringMode:u,maxSets:m})=>{const{t:f}=N(),p=[{id:"standings",label:f("roundRobin.standings")},{id:"results",label:f("roundRobin.matrix")},{id:"schedule",label:f("roundRobin.schedule")}];return t.jsxs("div",{className:"border border-[var(--color-border)] rounded-xl p-4 bg-[var(--color-card)]",children:[t.jsx("div",{className:"mb-4",children:t.jsx("div",{className:"text-sm font-semibold text-[var(--color-muted)]",children:f("groupStage.groupTitle",{label:ce(n)})})}),t.jsx(Z,{tabs:p,activeId:i,onChange:o}),i==="schedule"&&t.jsx(rt,{schedule:e.schedule,players:r,onEditMatch:d,scoringMode:u,maxSets:m}),i==="standings"&&t.jsx(tt,{standings:s,highlightCount:a,wildCardIds:l,scoringMode:u}),i==="results"&&t.jsxs("div",{className:"mt-6",children:[t.jsx("div",{className:"flex justify-end mb-2",children:t.jsx("button",{onClick:c,title:f("groupStage.printGroup"),className:"p-1 rounded text-[var(--color-muted)] hover:text-[var(--color-text)] hover:bg-[var(--color-soft)] transition-colors","aria-label":f("groupStage.printGroup"),children:t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[t.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),t.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),t.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]})})}),t.jsx(nt,{schedule:e.schedule,players:r,scoringMode:u,maxSets:m})]})]})},fn=({groupStage:e,players:n,standingsByGroup:r,wildCardIds:s,groupTabs:a,onGroupTabChange:l,onEditMatch:i,scoringMode:o,maxSets:d})=>{const{t:c}=N(),[u,m]=h.useState(null);h.useEffect(()=>{if(u===null)return;const x=()=>{m(null)};return window.addEventListener("afterprint",x,{once:!0}),window.print(),()=>{window.removeEventListener("afterprint",x)}},[u]);const f=h.useCallback((x,g)=>{const b=e.groups.find(y=>y.id===x);if(!b)return;const w=je(b,n),k=c("groupStage.groupTitle",{label:ce(g)});m({groupLabel:k,players:w,schedule:b.schedule,scoringMode:o,maxSets:d})},[e.groups,n,o,d,c]),p=document.querySelector("#print-root");return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"space-y-6",children:e.groups.map((x,g)=>{const b=je(x,n),w=r.find(S=>S.groupId===x.id)?.standings,k=e.settings.qualifiers[g]??0,y=a[x.id]??"standings";return t.jsx(xn,{group:x,groupIndex:g,groupPlayers:b,standings:w??[],qualifierCount:k,wildCardIds:s,activeTab:y,onTabChange:S=>{l(x.id,S)},onEditMatch:S=>{i(x.id,S.id)},onPrint:()=>{f(x.id,g)},scoringMode:o,maxSets:d},x.id)})}),u!==null&&p!==null?He.createPortal(t.jsx(st,{...u}),p):null]})},Fe=({title:e,bracket:n,players:r,onEditMatch:s,wildCardIds:a,scoringMode:l,maxSets:i,groupPlacementByPlayerId:o})=>{const{t:d}=N();if(!n)return null;const c=n.thirdPlaceMatch??null,u=n.rounds.length;return t.jsxs("div",{className:"border border-[var(--color-border)] rounded-xl p-4 space-y-4",children:[t.jsx("div",{className:"text-sm font-semibold text-[var(--color-muted)]",children:e}),t.jsx(J,{bracket:n,players:r,wildCardIds:a,scoringMode:l,maxSets:i,groupPlacementByPlayerId:o,onEditMatch:s}),c&&(c.player1Id??c.player2Id)&&t.jsxs("div",{className:"mt-2",children:[t.jsx("div",{className:"text-xs font-semibold text-[var(--color-muted)] mb-2",children:d("bracket.thirdPlace")}),t.jsx(K,{match:c,players:r,wildCardIds:a,canEdit:Oe(n,c.id),onClick:()=>{s(c)},scoringMode:l,maxSets:i,roundIndex:u})]})]})},We=({title:e,doubleElim:n,players:r,onEditMatch:s,wildCardIds:a,scoringMode:l,maxSets:i,groupPlacementByPlayerId:o})=>{const{t:d}=N();return n?t.jsxs("div",{className:"border border-[var(--color-border)] rounded-xl p-4 space-y-4",children:[t.jsx("div",{className:"text-sm font-semibold text-[var(--color-muted)]",children:e}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"text-xs font-semibold text-[var(--color-muted)]",children:d("doubleElim.winnersBracket")}),t.jsx(J,{bracket:n.winners,players:r,wildCardIds:a,scoringMode:l,maxSets:i,groupPlacementByPlayerId:o,onEditMatch:c=>{s(c.id)}})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"text-xs font-semibold text-[var(--color-muted)]",children:d("doubleElim.losersBracket")}),t.jsx(J,{bracket:n.losers,players:r,wildCardIds:a,scoringMode:l,maxSets:i,groupPlacementByPlayerId:o,onEditMatch:c=>{s(c.id)}})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"text-xs font-semibold text-[var(--color-muted)]",children:d("doubleElim.finals")}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[t.jsx(K,{match:n.finals.grandFinal,players:r,wildCardIds:a,canEdit:q(n,n.finals.grandFinal.id),onClick:()=>{s(n.finals.grandFinal.id)},scoringMode:l,maxSets:i,roundIndex:n.winners.rounds.length}),n.finals.resetFinal.player1Id&&n.finals.resetFinal.player2Id&&t.jsx(K,{match:n.finals.resetFinal,players:r,wildCardIds:a,canEdit:q(n,n.finals.resetFinal.id),onClick:()=>{s(n.finals.resetFinal.id)},scoringMode:l,maxSets:i,roundIndex:n.winners.rounds.length+1})]})]})]}):null},pn=({playoffs:e,isDoubleElim:n,players:r,wildCardIds:s,groupPlacementByPlayerId:a,scoringMode:l,maxSets:i,onEditMainBracketMatch:o,onEditConsolationBracketMatch:d,onEditMainDoubleElimMatch:c,onEditConsolationDoubleElimMatch:u})=>{const{t:m}=N();if(!e)return null;const f=!n&&e.mainBracket,p=n&&e.mainDoubleElim,x=!n&&e.consolationBracket,g=n&&e.consolationDoubleElim;return!f&&!p?null:t.jsxs(t.Fragment,{children:[f&&t.jsx(Fe,{title:m("groupStage.mainBracket"),bracket:e.mainBracket,players:r,wildCardIds:s,scoringMode:l,maxSets:i,groupPlacementByPlayerId:a,onEditMatch:o}),p&&t.jsx(We,{title:m("groupStage.mainBracket"),doubleElim:e.mainDoubleElim,players:r,wildCardIds:s,scoringMode:l,maxSets:i,groupPlacementByPlayerId:a,onEditMatch:c}),x&&t.jsx(Fe,{title:m("groupStage.consolationBracket"),bracket:e.consolationBracket,players:r,wildCardIds:s,scoringMode:l,maxSets:i,groupPlacementByPlayerId:a,onEditMatch:d}),g&&t.jsx(We,{title:m("groupStage.consolationBracket"),doubleElim:e.consolationDoubleElim,players:r,wildCardIds:s,scoringMode:l,maxSets:i,groupPlacementByPlayerId:a,onEditMatch:u})]})},hn=({editing:e,activeMatch:n,activePlayers:r,scoringMode:s,groupStageMaxSets:a,bracketMaxSets:l,onSave:i,onClose:o})=>{if(!n||!e)return null;const d=e.type==="group"?a:l;return t.jsx(ie,{match:n,players:r,scoringMode:s,maxSets:d,onSave:i,onClose:o})};function bn(e,n,r){const s=e.groups.find(a=>a.id===n);if(!s)return null;for(const a of s.schedule.rounds){const l=a.matches.find(i=>i.id===r);if(l)return l}return null}function gn(e,n){if(!e)return null;if(e.thirdPlaceMatch?.id===n)return e.thirdPlaceMatch;for(const r of e.rounds){const s=r.find(a=>a.id===n);if(s)return s}return null}function jn(e,n){if(!e)return null;for(const r of e.winners.rounds){const s=r.find(a=>a.id===n);if(s)return s}for(const r of e.losers.rounds){const s=r.find(a=>a.id===n);if(s)return s}return e.finals.grandFinal.id===n?e.finals.grandFinal:e.finals.resetFinal.id===n?e.finals.resetFinal:null}function yn(e,n,r,s){return h.useMemo(()=>e?gt(e,n,{scoringMode:r,maxSets:s}):[],[e,n,r,s])}function vn(e){return h.useMemo(()=>e?Ue(e):!1,[e])}function Nn(e,n,r,s,a){return h.useMemo(()=>!e||!n?null:jt(n,r,{scoringMode:s,maxSets:a}),[e,n,r,s,a])}function kn(e){return h.useMemo(()=>e?new Set(e.luckyLosers.map(n=>n.id)):null,[e])}function Sn(e,n){return h.useMemo(()=>{if(!e||!n)return null;const r=new Map(n.groups.map((l,i)=>[l.id,ce(i)])),s=new Map,a=l=>{const i=r.get(l.groupId);!i||!l.groupRank||s.set(l.id,`${i}${l.groupRank}`)};for(const l of e.main)a(l);for(const l of e.luckyLosers)a(l);for(const l of e.consolation)a(l);return s},[e,n])}function ke(e){return e?e.rounds.some(n=>n.some(r=>r.scores.length>0||r.winnerId)):!1}function Le(e){return e?!!(ke(e.winners)||e.losers.rounds.some(n=>n.some(r=>r.scores.length>0||r.winnerId))||e.finals.grandFinal.winnerId||e.finals.resetFinal.winnerId):!1}function wn(e,n){return e===n?!0:!e||!n?!1:e.bracketType===n.bracketType&&JSON.stringify(e.mainBracket)===JSON.stringify(n.mainBracket)&&JSON.stringify(e.mainDoubleElim)===JSON.stringify(n.mainDoubleElim)&&JSON.stringify(e.consolationBracket)===JSON.stringify(n.consolationBracket)&&JSON.stringify(e.consolationDoubleElim)===JSON.stringify(n.consolationDoubleElim)}function In(e){const n=e.groupStagePlayoffs??e.groupStageBrackets;return n||null}function Y(e,n){return e?n&&e.mainDoubleElim?ae(e.mainDoubleElim):e.mainBracket?se(e.mainBracket):null:null}function $e(e,n){return e?n?!!e.mainDoubleElim||!!e.consolationDoubleElim:!!e.mainBracket||!!e.consolationBracket:!1}function Tn(e,n){return e?n?Le(e.mainDoubleElim)||Le(e.consolationDoubleElim):ke(e.mainBracket)||ke(e.consolationBracket):!1}const En=()=>{const{tournament:e,updateTournament:n}=wt(),{t:r}=N(),[s,a]=h.useState(null),[l,i]=h.useState({}),[o,d]=h.useState("tournament"),c=e?.groupStage,u=h.useMemo(()=>e?.players??[],[e?.players]),m=e?In(e):null,f=e?.scoringMode??C.SETS,p=e?.groupStageMaxSets??e?.maxSets??U,x=e?.bracketMaxSets??e?.maxSets??U,b=(m?.bracketType??c?.settings.bracketType??Te.SINGLE_ELIM)===Te.DOUBLE_ELIM,w=yn(c,u,f,p),k=vn(c),y=Nn(k,c,u,f,p),S=kn(y),H=Sn(y,c),F=h.useMemo(()=>e?e.winnerId?e.winnerId:Y(m,b):null,[m,e,b]),D=h.useMemo(()=>F?u.find(j=>j.id===F):null,[u,F]);h.useEffect(()=>{if(!k||!y||!c||$e(m,b)&&Tn(m,b))return;const T=Ce(c,u,{scoringMode:f,maxSets:p});if(wn(m,T))return;const E=Y(T,b);n(P=>({...P,groupStagePlayoffs:T,winnerId:E??null,completedAt:E?new Date().toISOString():null}))},[y,k,c,m,u,f,p,n,b,e]);const O=h.useMemo(()=>{if(!s||!c)return null;if(s.type==="group"&&s.groupId)return bn(c,s.groupId,s.matchId);if(s.type==="mainBracket"||s.type==="consolationBracket"){const j=m?.[s.type];return gn(j,s.matchId)}if(s.type==="mainDoubleElim"||s.type==="consolationDoubleElim"){const j=m?.[s.type];return jn(j,s.matchId)}return null},[s,c,m]),_=h.useMemo(()=>{if(!s||!c)return u;if(s.type==="group"){const j=c.groups.find(v=>v.id===s.groupId);return j?je(j,u):u}return u},[s,c,u]),he=h.useMemo(()=>{if(o!=="results")return[];let j=[],v=[];return m&&(b&&m.mainDoubleElim?j=ve(m.mainDoubleElim,u):m.mainBracket&&(j=ye(m.mainBracket,u)),b&&m.consolationDoubleElim?v=De(ve(m.consolationDoubleElim,u),j.length):m.consolationBracket&&(v=De(ye(m.consolationBracket,u),j.length))),we([...j,...v])},[o,m,u,b]);function z(j,v,T,E=!1){if(!c)return;const P=structuredClone(c);for(const G of P.groups)for(const dt of G.schedule.rounds){const te=dt.matches.find(ut=>ut.id===j);if(te){te.winnerId=v,te.scores=T,te.walkover=E;break}}let R=m;const W=m&&$e(m,b);Ue(P)&&!W&&(R=Ce(P,u,{scoringMode:f,maxSets:p}));const A=Y(R,b);n(G=>({...G,groupStage:P,groupStagePlayoffs:R,winnerId:A??null,completedAt:A?new Date().toISOString():null})),a(null)}function ee(j,v,T,E,P=!1){if(!m||!c)return;const R=structuredClone(m),W=R[E];if(!W)return;R[E]=v?Ae(W,j,v,T,P):Ge(W,j);const A=Y(R,b);n(G=>({...G,groupStage:c,groupStagePlayoffs:R,winnerId:A??null,completedAt:A?new Date().toISOString():null})),a(null)}function Ie(j,v,T,E,P=!1){if(!m||!c)return;const R=structuredClone(m),W=R[E];if(!W)return;R[E]=v?_e(W,j,v,T,P):ze(W,j);const A=Y(R,b);n(G=>({...G,groupStage:c,groupStagePlayoffs:R,winnerId:A??null,completedAt:A?new Date().toISOString():null})),a(null)}function ot(j,v,T,E){if(s)switch(s.type){case"group":{z(j,v,T,E);break}case"mainBracket":{ee(j,v,T,"mainBracket",E);break}case"consolationBracket":{ee(j,v,T,"consolationBracket",E);break}case"mainDoubleElim":{Ie(j,v,T,"mainDoubleElim",E);break}case"consolationDoubleElim":{Ie(j,v,T,"consolationDoubleElim",E);break}}}function it(j,v){i(T=>({...T,[j]:v}))}function lt(j,v){a({type:"group",groupId:j,matchId:v})}const ct=[{id:"tournament",label:r("tabs.tournament")},{id:"results",label:r("tabs.results")}];return!e||!c?null:t.jsxs("div",{className:"space-y-8",children:[D&&t.jsx(ue,{label:r("bracket.winner",{name:D.name})}),t.jsx(Z,{tabs:ct,activeId:o,onChange:d}),o==="results"?t.jsx(pe,{results:he}):t.jsxs(t.Fragment,{children:[t.jsx(fn,{groupStage:c,players:u,standingsByGroup:w,wildCardIds:S,groupTabs:l,onGroupTabChange:it,onEditMatch:lt,scoringMode:f,maxSets:p}),y&&t.jsx(mn,{qualifiers:y.main,luckyLosers:y.luckyLosers,luckyCandidates:y.luckyCandidates,groups:c.groups,bracketTargetSize:y.bracketTargetSize,scoringMode:f}),t.jsx(pn,{playoffs:m,isDoubleElim:b,players:u,wildCardIds:S,groupPlacementByPlayerId:H,scoringMode:f,maxSets:x,onEditMainBracketMatch:j=>{a({type:"mainBracket",matchId:j.id})},onEditConsolationBracketMatch:j=>{a({type:"consolationBracket",matchId:j.id})},onEditMainDoubleElimMatch:j=>{a({type:"mainDoubleElim",matchId:j})},onEditConsolationDoubleElimMatch:j=>{a({type:"consolationDoubleElim",matchId:j})}}),t.jsx(hn,{editing:s,activeMatch:O,activePlayers:_,scoringMode:f,groupStageMaxSets:p,bracketMaxSets:x,onSave:ot,onClose:()=>{a(null)}})]})]})},Cn=()=>{const{tournament:e,isLoading:n}=de(),{t:r}=N(),s=xt(),{tracker:a}=pt();return h.useEffect(()=>{a.trackPageView({})},[s,a]),ht(e?e.name:r("tournament.notFoundTitle")),n?t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-[var(--color-muted)]",children:r("tournament.loading")})}):e?t.jsxs("div",{children:[t.jsxs("div",{className:"mb-6",children:[t.jsx(Q,{to:"/",className:"text-sm text-[var(--color-primary)] hover:text-[var(--color-primary-dark)]",children:r("tournament.back")}),t.jsx("h1",{className:"text-2xl font-bold text-[var(--color-text)] mt-2",children:e.name}),t.jsxs("p",{className:"text-sm text-[var(--color-muted)]",children:[r(`format.${e.format}`)," ·"," ",r("tournament.players",{count:e.players.length})]})]}),t.jsx(rn,{}),e.format===L.SINGLE_ELIM&&t.jsx(Lt,{}),e.format===L.ROUND_ROBIN&&t.jsx(nn,{}),e.format===L.DOUBLE_ELIM&&t.jsx($t,{}),e.format===L.GROUPS_TO_BRACKET&&t.jsx(En,{})]}):t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[50vh] text-center px-4",children:[t.jsx(kt,{className:"h-12 w-12 text-[var(--color-muted)] mb-4"}),t.jsx("h2",{className:"text-xl font-semibold text-[var(--color-text)] mb-2",children:r("tournament.notFoundTitle")}),t.jsx("p",{className:"text-[var(--color-muted)] mb-6 max-w-md",children:r("tournament.notFoundDesc")}),t.jsxs("div",{className:"flex gap-3 flex-wrap justify-center",children:[t.jsx(re,{asChild:!0,children:t.jsx(Q,{to:"/create",children:r("home.newTournament")})}),t.jsx(re,{variant:"primary-outlined",asChild:!0,children:t.jsx(Q,{to:"/",children:r("tournament.backHome")})})]})]})},$n=()=>{const{id:e}=mt(),{t:n}=N();return e?t.jsx(It,{tournamentId:e,children:t.jsx(Cn,{})}):t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[50vh] text-center px-4",children:[t.jsx(Nt,{className:"h-12 w-12 text-[var(--color-muted)] mb-4"}),t.jsx("h2",{className:"text-xl font-semibold text-[var(--color-text)] mb-2",children:n("tournament.notFoundTitle")}),t.jsx("p",{className:"text-[var(--color-muted)] mb-6 max-w-md",children:n("tournament.noIdDesc")}),t.jsxs("div",{className:"flex gap-3 flex-wrap justify-center",children:[t.jsx(re,{asChild:!0,children:t.jsx(Q,{to:"/create",children:n("home.newTournament")})}),t.jsx(re,{variant:"primary-outlined",asChild:!0,children:t.jsx(Q,{to:"/",children:n("tournament.backHome")})})]})]})};export{$n as TournamentPage};
