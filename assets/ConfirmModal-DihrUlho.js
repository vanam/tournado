import{S,b as G,c as g,B as k}from"./index-eCmkk7TN.js";import{r as m,j as i}from"./react-vendor-B7IL4Whh.js";import{o as U,p as F,q as j,r as W,s as D,D as M,O as B}from"./radix-ui-BObq5o7x.js";import{X as z,g as K}from"./icons-kaZEYU8o.js";var p=(e=>(e.SINGLE_ELIM="SINGLE_ELIM",e.DOUBLE_ELIM="DOUBLE_ELIM",e.ROUND_ROBIN="ROUND_ROBIN",e.GROUPS_TO_BRACKET="GROUPS_TO_BRACKET",e.SWISS="SWISS",e))(p||{}),O=(e=>(e.SINGLE_ELIM="single_elim",e.DOUBLE_ELIM="double_elim",e))(O||{}),L=(e=>(e.SETS="SETS",e.POINTS="POINTS",e))(L||{});function a(e){return typeof e=="string"}function c(e){return typeof e=="number"&&!Number.isNaN(e)}function h(e){return typeof e=="boolean"}function l(e){return Array.isArray(e)}function f(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function n(e){return e==null}function q(e){return Object.values(p).includes(e)}function T(e){return Object.values(O).includes(e)}function H(e){return Object.values(L).includes(e)}function J(e){return l(e)&&e.length===2&&c(e[0])&&c(e[1])}function X(e){return!(!f(e)||!a(e.id)||!a(e.name)||"seed"in e&&!n(e.seed)&&!c(e.seed)||"elo"in e&&!n(e.elo)&&!c(e.elo))}function y(e){return!(!f(e)||!a(e.id)||"player1Id"in e&&!n(e.player1Id)&&!a(e.player1Id)||"player2Id"in e&&!n(e.player2Id)&&!a(e.player2Id)||"scores"in e&&!l(e.scores)||"scores"in e&&l(e.scores)&&!e.scores.every(r=>J(r))||"winnerId"in e&&!n(e.winnerId)&&!a(e.winnerId)||"walkover"in e&&!h(e.walkover)||"nextMatchId"in e&&!n(e.nextMatchId)&&!a(e.nextMatchId)||"position"in e&&!n(e.position)&&!c(e.position)||"dummy"in e&&!h(e.dummy))}function I(e){return!(!f(e)||!l(e.rounds)||!e.rounds.every(r=>l(r)&&r.every(t=>y(t)))||"thirdPlaceMatch"in e&&!n(e.thirdPlaceMatch)&&!y(e.thirdPlaceMatch))}function Y(e){return!(!f(e)||!c(e.roundNumber)||"byePlayerId"in e&&!n(e.byePlayerId)&&!a(e.byePlayerId)||!l(e.matches)||!e.matches.every(r=>y(r)))}function N(e){return!(!f(e)||!l(e.rounds)||!e.rounds.every(r=>Y(r)))}function Q(e){return!(!f(e)||!a(e.matchId)||e.slot!=="player1Id"&&e.slot!=="player2Id")}function Z(e){return!(!y(e)||"winnersSources"in e&&!n(e.winnersSources)&&(!l(e.winnersSources)||!e.winnersSources.every(r=>a(r)))||"loserSlotFromWinners"in e&&!n(e.loserSlotFromWinners)&&e.loserSlotFromWinners!=="player1Id"&&e.loserSlotFromWinners!=="player2Id")}function $(e){return!(!f(e)||!y(e.grandFinal)||!y(e.resetFinal))}function E(e){if(!f(e)||!I(e.winners)||!f(e.losers)||!l(e.losers.rounds)||!e.losers.rounds.every(r=>l(r)&&r.every(t=>Z(t)))||!$(e.finals)||!f(e.loserLinks))return!1;for(const r of Object.values(e.loserLinks))if(!Q(r))return!1;return!0}function v(e){return!(!f(e)||!c(e.groupCount)||!l(e.qualifiers)||!e.qualifiers.every(r=>c(r))||!h(e.consolation)||"bracketType"in e&&!n(e.bracketType)&&!T(e.bracketType))}function ee(e){return!(!f(e)||!a(e.id)||!a(e.name)||!l(e.playerIds)||!e.playerIds.every(r=>a(r))||!N(e.schedule)||!c(e.order))}function re(e){return!(!f(e)||!l(e.groups)||!e.groups.every(r=>ee(r))||!v(e.settings))}function w(e){return!(!f(e)||!T(e.bracketType)||"mainBracket"in e&&!n(e.mainBracket)&&!I(e.mainBracket)||"mainDoubleElim"in e&&!n(e.mainDoubleElim)&&!E(e.mainDoubleElim)||"consolationBracket"in e&&!n(e.consolationBracket)&&!I(e.consolationBracket)||"consolationDoubleElim"in e&&!n(e.consolationDoubleElim)&&!E(e.consolationDoubleElim))}function te(e){return!(!f(e)||!a(e.id)||!a(e.name)||!l(e.players)||!e.players.every(r=>X(r))||!a(e.createdAt)||"completedAt"in e&&!n(e.completedAt)&&!a(e.completedAt)||"winnerId"in e&&!n(e.winnerId)&&!a(e.winnerId)||"scoringMode"in e&&!n(e.scoringMode)&&!H(e.scoringMode)||"maxSets"in e&&!n(e.maxSets)&&!c(e.maxSets)||"groupStageMaxSets"in e&&!n(e.groupStageMaxSets)&&!c(e.groupStageMaxSets)||"bracketMaxSets"in e&&!n(e.bracketMaxSets)&&!c(e.bracketMaxSets))}function ne(e){if(!te(e)||!q(e.format))return!1;switch(e.format){case p.SINGLE_ELIM:{if(!I(e.bracket))return!1;break}case p.DOUBLE_ELIM:{if(!E(e.doubleElim))return!1;break}case p.ROUND_ROBIN:{if(!N(e.schedule))return!1;break}case p.GROUPS_TO_BRACKET:{if(!re(e.groupStage)||"groupStagePlayoffs"in e&&!n(e.groupStagePlayoffs)&&!w(e.groupStagePlayoffs)||"groupStageBrackets"in e&&!n(e.groupStageBrackets)&&!w(e.groupStageBrackets)||"maxSetsBracket"in e&&!n(e.maxSetsBracket)&&!c(e.maxSetsBracket))return!1;break}case p.SWISS:{if(!N(e.schedule)||!c(e.totalRounds))return!1;break}}return!0}function se(e){return l(e)?e.filter(r=>ne(r)):[]}function ie(){return{loadAll(){try{const e=localStorage.getItem(S);return se(e?JSON.parse(e):[])}catch{return[]}},load(e){return this.loadAll().find(r=>r.id===e)??null},save(e){const r=this.loadAll(),t=r.findIndex(o=>o.id===e.id);t===-1?r.push(e):r[t]=e,localStorage.setItem(S,JSON.stringify(r))},delete(e){const r=this.loadAll().filter(t=>t.id!==e);localStorage.setItem(S,JSON.stringify(r))},deleteAll(){localStorage.setItem(S,"[]")}}}function oe(e=ie()){const r=new Set,t=new Map;function o(){for(const s of r)s()}return typeof window<"u"&&window.addEventListener("storage",s=>{s.storageArea===localStorage&&(s.key!==null&&s.key!==S||(t.clear(),o()))}),{save(s){t.set(s.id,s),e.save(s),o()},load(s){const d=t.get(s);if(d)return d;const u=e.load(s);return u&&t.set(s,u),u},loadAll(){return e.loadAll()},delete(s){t.delete(s),e.delete(s),o()},deleteAll(){t.clear(),e.deleteAll(),o()},subscribe(s){return r.add(s),()=>r.delete(s)}}}const Se=oe(),ae=G("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-[var(--color-primary)] text-white",secondary:"border-transparent bg-[var(--color-soft)] text-[var(--color-text)]",accent:"border-transparent bg-[var(--color-accent-soft)] text-[var(--color-accent)]",outline:"border-[var(--color-border)] text-[var(--color-text)]",destructive:"border-transparent bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),fe=m.forwardRef(({className:e,variant:r,...t},o)=>i.jsx("div",{ref:o,className:g(ae({variant:r}),e),...t}));fe.displayName="Badge";const le=U,ce=F,R=m.forwardRef(({className:e,...r},t)=>i.jsx(B,{ref:t,className:g("fixed inset-0 z-50 bg-[var(--color-overlay)] backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...r}));R.displayName=B.displayName;const A=m.forwardRef(({className:e,children:r,...t},o)=>i.jsxs(ce,{children:[i.jsx(R,{}),i.jsxs(j,{ref:o,className:g("fixed left-[50%] top-[50%] z-50 grid w-full max-w-md translate-x-[-50%] translate-y-[-50%] gap-4 rounded-2xl bg-[var(--color-card)] p-6 shadow-2xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]",e),...t,children:[r,i.jsxs(W,{className:"absolute right-4 top-4 rounded-full p-1 text-[var(--color-muted)] transition-opacity hover:bg-[var(--color-soft)] hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:ring-offset-2 disabled:pointer-events-none",children:[i.jsx(z,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));A.displayName=j.displayName;const V=({className:e,...r})=>i.jsx("div",{className:g("flex flex-col space-y-1.5 text-center sm:text-left",e),...r});V.displayName="DialogHeader";const _=({className:e,...r})=>i.jsx("div",{className:g("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...r});_.displayName="DialogFooter";const P=m.forwardRef(({className:e,...r},t)=>i.jsx(D,{ref:t,className:g("text-lg font-semibold leading-none tracking-tight text-[var(--color-text)]",e),...r}));P.displayName=D.displayName;const C=m.forwardRef(({className:e,...r},t)=>i.jsx(M,{ref:t,className:g("text-sm text-[var(--color-muted)]",e),...r}));C.displayName=M.displayName;const b=[];function de(){const e=m.useRef(Symbol("modal"));return m.useEffect(()=>{const t=e.current;return b.push(t),()=>{const o=b.lastIndexOf(t);o!==-1&&b.splice(o,1)}},[]),{isTopModal:()=>b.at(-1)===e.current}}function ue(e){if(!(e instanceof HTMLElement))return!1;if(e.isContentEditable)return!0;const r=e.tagName.toLowerCase();if(r==="textarea"||r==="button"||r==="a")return!0;if(r==="input"){const t=(e.getAttribute("type")??"").toLowerCase();return t==="button"||t==="submit"||t==="reset"}return r==="select"}const me=({open:e,onOpenChange:r,onPrimaryAction:t,primaryActionDisabled:o,children:s})=>{const{isTopModal:d}=de();return m.useEffect(()=>{function u(x){if(!(!d()||x.isComposing)){if(x.key==="Escape"){r(!1);return}if(x.key==="Enter"&&t&&!o){if(ue(x.target))return;x.preventDefault(),t()}}}if(e)return window.addEventListener("keydown",u),()=>{window.removeEventListener("keydown",u)}},[e,d,r,t,o]),i.jsx(le,{open:e,onOpenChange:r,children:s})},be=({title:e,message:r,confirmLabel:t,cancelLabel:o,onConfirm:s,onCancel:d})=>i.jsx(me,{open:!0,onOpenChange:u=>{u||d()},onPrimaryAction:s,children:i.jsxs(A,{className:"z-150",children:[i.jsxs(V,{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(K,{className:"h-5 w-5 text-[var(--color-accent)] shrink-0"}),i.jsx(P,{children:e})]}),i.jsx(C,{children:r})]}),i.jsxs(_,{children:[i.jsx(k,{variant:"primary-ghost",onClick:d,children:o}),i.jsx(k,{variant:"secondary",onClick:s,children:t})]})]})});export{fe as B,be as C,A as D,p as F,L as S,O as a,me as b,P as c,Se as p};
