import{S,c as g,B as N}from"./index-pZVvs6EJ.js";import{r as m,j as i}from"./react-vendor-B7IL4Whh.js";import{o as G,p as U,q as w,r as F,s as D,D as M,O as j}from"./radix-ui-BObq5o7x.js";import{X as z,g as K}from"./icons-DoRsKl6D.js";var p=(e=>(e.SINGLE_ELIM="SINGLE_ELIM",e.DOUBLE_ELIM="DOUBLE_ELIM",e.ROUND_ROBIN="ROUND_ROBIN",e.GROUPS_TO_BRACKET="GROUPS_TO_BRACKET",e))(p||{}),O=(e=>(e.SINGLE_ELIM="single_elim",e.DOUBLE_ELIM="double_elim",e))(O||{}),B=(e=>(e.SETS="SETS",e.POINTS="POINTS",e))(B||{});function o(e){return typeof e=="string"}function c(e){return typeof e=="number"&&!Number.isNaN(e)}function I(e){return typeof e=="boolean"}function l(e){return Array.isArray(e)}function f(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function n(e){return e==null}function W(e){return Object.values(p).includes(e)}function L(e){return Object.values(O).includes(e)}function q(e){return Object.values(B).includes(e)}function H(e){return l(e)&&e.length===2&&c(e[0])&&c(e[1])}function J(e){return!(!f(e)||!o(e.id)||!o(e.name)||"seed"in e&&!n(e.seed)&&!c(e.seed)||"elo"in e&&!n(e.elo)&&!c(e.elo))}function y(e){return!(!f(e)||!o(e.id)||"player1Id"in e&&!n(e.player1Id)&&!o(e.player1Id)||"player2Id"in e&&!n(e.player2Id)&&!o(e.player2Id)||"scores"in e&&!l(e.scores)||"scores"in e&&l(e.scores)&&!e.scores.every(r=>H(r))||"winnerId"in e&&!n(e.winnerId)&&!o(e.winnerId)||"walkover"in e&&!I(e.walkover)||"nextMatchId"in e&&!n(e.nextMatchId)&&!o(e.nextMatchId)||"position"in e&&!n(e.position)&&!c(e.position)||"dummy"in e&&!I(e.dummy))}function h(e){return!(!f(e)||!l(e.rounds)||!e.rounds.every(r=>l(r)&&r.every(t=>y(t)))||"thirdPlaceMatch"in e&&!n(e.thirdPlaceMatch)&&!y(e.thirdPlaceMatch))}function X(e){return!(!f(e)||!c(e.roundNumber)||"byePlayerId"in e&&!n(e.byePlayerId)&&!o(e.byePlayerId)||!l(e.matches)||!e.matches.every(r=>y(r)))}function T(e){return!(!f(e)||!l(e.rounds)||!e.rounds.every(r=>X(r)))}function Y(e){return!(!f(e)||!o(e.matchId)||e.slot!=="player1Id"&&e.slot!=="player2Id")}function Q(e){return!(!y(e)||"winnersSources"in e&&!n(e.winnersSources)&&(!l(e.winnersSources)||!e.winnersSources.every(r=>o(r)))||"loserSlotFromWinners"in e&&!n(e.loserSlotFromWinners)&&e.loserSlotFromWinners!=="player1Id"&&e.loserSlotFromWinners!=="player2Id")}function Z(e){return!(!f(e)||!y(e.grandFinal)||!y(e.resetFinal))}function E(e){if(!f(e)||!h(e.winners)||!f(e.losers)||!l(e.losers.rounds)||!e.losers.rounds.every(r=>l(r)&&r.every(t=>Q(t)))||!Z(e.finals)||!f(e.loserLinks))return!1;for(const r of Object.values(e.loserLinks))if(!Y(r))return!1;return!0}function $(e){return!(!f(e)||!c(e.groupCount)||!l(e.qualifiers)||!e.qualifiers.every(r=>c(r))||!I(e.consolation)||"bracketType"in e&&!n(e.bracketType)&&!L(e.bracketType))}function v(e){return!(!f(e)||!o(e.id)||!o(e.name)||!l(e.playerIds)||!e.playerIds.every(r=>o(r))||!T(e.schedule)||!c(e.order))}function ee(e){return!(!f(e)||!l(e.groups)||!e.groups.every(r=>v(r))||!$(e.settings))}function k(e){return!(!f(e)||!L(e.bracketType)||"mainBracket"in e&&!n(e.mainBracket)&&!h(e.mainBracket)||"mainDoubleElim"in e&&!n(e.mainDoubleElim)&&!E(e.mainDoubleElim)||"consolationBracket"in e&&!n(e.consolationBracket)&&!h(e.consolationBracket)||"consolationDoubleElim"in e&&!n(e.consolationDoubleElim)&&!E(e.consolationDoubleElim))}function re(e){return!(!f(e)||!o(e.id)||!o(e.name)||!l(e.players)||!e.players.every(r=>J(r))||!o(e.createdAt)||"completedAt"in e&&!n(e.completedAt)&&!o(e.completedAt)||"winnerId"in e&&!n(e.winnerId)&&!o(e.winnerId)||"scoringMode"in e&&!n(e.scoringMode)&&!q(e.scoringMode)||"maxSets"in e&&!n(e.maxSets)&&!c(e.maxSets)||"groupStageMaxSets"in e&&!n(e.groupStageMaxSets)&&!c(e.groupStageMaxSets)||"bracketMaxSets"in e&&!n(e.bracketMaxSets)&&!c(e.bracketMaxSets))}function te(e){if(!re(e)||!W(e.format))return!1;switch(e.format){case p.SINGLE_ELIM:{if(!h(e.bracket))return!1;break}case p.DOUBLE_ELIM:{if(!E(e.doubleElim))return!1;break}case p.ROUND_ROBIN:{if(!T(e.schedule))return!1;break}case p.GROUPS_TO_BRACKET:{if(!ee(e.groupStage)||"groupStagePlayoffs"in e&&!n(e.groupStagePlayoffs)&&!k(e.groupStagePlayoffs)||"groupStageBrackets"in e&&!n(e.groupStageBrackets)&&!k(e.groupStageBrackets)||"maxSetsBracket"in e&&!n(e.maxSetsBracket)&&!c(e.maxSetsBracket))return!1;break}}return!0}function ne(e){return l(e)?e.filter(r=>te(r)):[]}function se(){return{loadAll(){try{const e=localStorage.getItem(S);return ne(e?JSON.parse(e):[])}catch{return[]}},load(e){return this.loadAll().find(r=>r.id===e)??null},save(e){const r=this.loadAll(),t=r.findIndex(a=>a.id===e.id);t===-1?r.push(e):r[t]=e,localStorage.setItem(S,JSON.stringify(r))},delete(e){const r=this.loadAll().filter(t=>t.id!==e);localStorage.setItem(S,JSON.stringify(r))},deleteAll(){localStorage.setItem(S,"[]")}}}function ie(e=se()){const r=new Set,t=new Map;function a(){for(const s of r)s()}return typeof window<"u"&&window.addEventListener("storage",s=>{s.storageArea===localStorage&&(s.key!==null&&s.key!==S||(t.clear(),a()))}),{save(s){t.set(s.id,s),e.save(s),a()},load(s){const d=t.get(s);if(d)return d;const u=e.load(s);return u&&t.set(s,u),u},loadAll(){return e.loadAll()},delete(s){t.delete(s),e.delete(s),a()},deleteAll(){t.clear(),e.deleteAll(),a()},subscribe(s){return r.add(s),()=>r.delete(s)}}}const ye=ie(),oe=G,ae=U,A=m.forwardRef(({className:e,...r},t)=>i.jsx(j,{ref:t,className:g("fixed inset-0 z-50 bg-[var(--color-overlay)] backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...r}));A.displayName=j.displayName;const R=m.forwardRef(({className:e,children:r,...t},a)=>i.jsxs(ae,{children:[i.jsx(A,{}),i.jsxs(w,{ref:a,className:g("fixed left-[50%] top-[50%] z-50 grid w-full max-w-md translate-x-[-50%] translate-y-[-50%] gap-4 rounded-2xl bg-[var(--color-card)] p-6 shadow-2xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]",e),...t,children:[r,i.jsxs(F,{className:"absolute right-4 top-4 rounded-full p-1 text-[var(--color-muted)] transition-opacity hover:bg-[var(--color-soft)] hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] focus:ring-offset-2 disabled:pointer-events-none",children:[i.jsx(z,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));R.displayName=w.displayName;const _=({className:e,...r})=>i.jsx("div",{className:g("flex flex-col space-y-1.5 text-center sm:text-left",e),...r});_.displayName="DialogHeader";const V=({className:e,...r})=>i.jsx("div",{className:g("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...r});V.displayName="DialogFooter";const P=m.forwardRef(({className:e,...r},t)=>i.jsx(D,{ref:t,className:g("text-lg font-semibold leading-none tracking-tight text-[var(--color-text)]",e),...r}));P.displayName=D.displayName;const C=m.forwardRef(({className:e,...r},t)=>i.jsx(M,{ref:t,className:g("text-sm text-[var(--color-muted)]",e),...r}));C.displayName=M.displayName;const b=[];function fe(){const e=m.useRef(Symbol("modal"));return m.useEffect(()=>{const t=e.current;return b.push(t),()=>{const a=b.lastIndexOf(t);a!==-1&&b.splice(a,1)}},[]),{isTopModal:()=>b.at(-1)===e.current}}function le(e){if(!(e instanceof HTMLElement))return!1;if(e.isContentEditable)return!0;const r=e.tagName.toLowerCase();if(r==="textarea"||r==="button"||r==="a")return!0;if(r==="input"){const t=(e.getAttribute("type")??"").toLowerCase();return t==="button"||t==="submit"||t==="reset"}return r==="select"}const ce=({open:e,onOpenChange:r,onPrimaryAction:t,primaryActionDisabled:a,children:s})=>{const{isTopModal:d}=fe();return m.useEffect(()=>{function u(x){if(!(!d()||x.isComposing)){if(x.key==="Escape"){r(!1);return}if(x.key==="Enter"&&t&&!a){if(le(x.target))return;x.preventDefault(),t()}}}if(e)return window.addEventListener("keydown",u),()=>{window.removeEventListener("keydown",u)}},[e,d,r,t,a]),i.jsx(oe,{open:e,onOpenChange:r,children:s})},ge=({title:e,message:r,confirmLabel:t,cancelLabel:a,onConfirm:s,onCancel:d})=>i.jsx(ce,{open:!0,onOpenChange:u=>{u||d()},onPrimaryAction:s,children:i.jsxs(R,{className:"z-150",children:[i.jsxs(_,{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(K,{className:"h-5 w-5 text-[var(--color-accent)] shrink-0"}),i.jsx(P,{children:e})]}),i.jsx(C,{children:r})]}),i.jsxs(V,{children:[i.jsx(N,{variant:"ghost",onClick:d,children:a}),i.jsx(N,{variant:"secondary",onClick:s,children:t})]})]})});export{O as B,ge as C,R as D,p as F,B as S,ce as a,P as b,ye as p};
