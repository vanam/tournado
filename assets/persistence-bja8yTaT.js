import{S as u}from"./index-B-xkjx0h.js";import{F as l,S as h,a as A}from"./ConfirmModal-DMEH6cWt.js";function i(r){return typeof r=="string"}function c(r){return typeof r=="number"&&!Number.isNaN(r)}function m(r){return typeof r=="boolean"}function o(r){return Array.isArray(r)}function f(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function t(r){return r==null}function M(r){return Object.values(l).includes(r)}function I(r){return Object.values(A).includes(r)}function w(r){return Object.values(h).includes(r)}function B(r){return o(r)&&r.length===2&&c(r[0])&&c(r[1])}function V(r){return!(!f(r)||!i(r.id)||!i(r.name)||"seed"in r&&!t(r.seed)&&!c(r.seed)||"elo"in r&&!t(r.elo)&&!c(r.elo))}function d(r){return!(!f(r)||!i(r.id)||"player1Id"in r&&!t(r.player1Id)&&!i(r.player1Id)||"player2Id"in r&&!t(r.player2Id)&&!i(r.player2Id)||"scores"in r&&!o(r.scores)||"scores"in r&&o(r.scores)&&!r.scores.every(e=>B(e))||"winnerId"in r&&!t(r.winnerId)&&!i(r.winnerId)||"walkover"in r&&!m(r.walkover)||"nextMatchId"in r&&!t(r.nextMatchId)&&!i(r.nextMatchId)||"position"in r&&!t(r.position)&&!c(r.position)||"dummy"in r&&!m(r.dummy))}function y(r){return!(!f(r)||!o(r.rounds)||!r.rounds.every(e=>o(e)&&e.every(s=>d(s)))||"thirdPlaceMatch"in r&&!t(r.thirdPlaceMatch)&&!d(r.thirdPlaceMatch))}function x(r){return!(!f(r)||!c(r.roundNumber)||"byePlayerId"in r&&!t(r.byePlayerId)&&!i(r.byePlayerId)||!o(r.matches)||!r.matches.every(e=>d(e)))}function p(r){return!(!f(r)||!o(r.rounds)||!r.rounds.every(e=>x(e)))}function E(r){return!(!f(r)||!i(r.matchId)||r.slot!=="player1Id"&&r.slot!=="player2Id")}function O(r){return!(!d(r)||"winnersSources"in r&&!t(r.winnersSources)&&(!o(r.winnersSources)||!r.winnersSources.every(e=>i(e)))||"loserSlotFromWinners"in r&&!t(r.loserSlotFromWinners)&&r.loserSlotFromWinners!=="player1Id"&&r.loserSlotFromWinners!=="player2Id")}function P(r){return!(!f(r)||!d(r.grandFinal)||!d(r.resetFinal))}function g(r){if(!f(r)||!y(r.winners)||!f(r.losers)||!o(r.losers.rounds)||!r.losers.rounds.every(e=>o(e)&&e.every(s=>O(s)))||!P(r.finals)||!f(r.loserLinks))return!1;for(const e of Object.values(r.loserLinks))if(!E(e))return!1;return!0}function N(r){return!(!f(r)||!c(r.groupCount)||!o(r.qualifiers)||!r.qualifiers.every(e=>c(e))||!m(r.consolation)||"bracketType"in r&&!t(r.bracketType)&&!I(r.bracketType))}function T(r){return!(!f(r)||!i(r.id)||!i(r.name)||!o(r.playerIds)||!r.playerIds.every(e=>i(e))||!p(r.schedule)||!c(r.order))}function D(r){return!(!f(r)||!o(r.groups)||!r.groups.every(e=>T(e))||!N(r.settings))}function k(r){return!(!f(r)||!I(r.bracketType)||"mainBracket"in r&&!t(r.mainBracket)&&!y(r.mainBracket)||"mainDoubleElim"in r&&!t(r.mainDoubleElim)&&!g(r.mainDoubleElim)||"consolationBracket"in r&&!t(r.consolationBracket)&&!y(r.consolationBracket)||"consolationDoubleElim"in r&&!t(r.consolationDoubleElim)&&!g(r.consolationDoubleElim))}function F(r){return!(!f(r)||!i(r.id)||!i(r.name)||!o(r.players)||!r.players.every(e=>V(e))||!i(r.createdAt)||"completedAt"in r&&!t(r.completedAt)&&!i(r.completedAt)||"winnerId"in r&&!t(r.winnerId)&&!i(r.winnerId)||"scoringMode"in r&&!t(r.scoringMode)&&!w(r.scoringMode)||"maxSets"in r&&!t(r.maxSets)&&!c(r.maxSets)||"groupStageMaxSets"in r&&!t(r.groupStageMaxSets)&&!c(r.groupStageMaxSets)||"bracketMaxSets"in r&&!t(r.bracketMaxSets)&&!c(r.bracketMaxSets))}function L(r){if(!F(r)||!M(r.format))return!1;switch(r.format){case l.SINGLE_ELIM:{if(!y(r.bracket))return!1;break}case l.DOUBLE_ELIM:{if(!g(r.doubleElim))return!1;break}case l.ROUND_ROBIN:{if(!p(r.schedule))return!1;break}case l.GROUPS_TO_BRACKET:{if(!D(r.groupStage)||"groupStagePlayoffs"in r&&!t(r.groupStagePlayoffs)&&!k(r.groupStagePlayoffs)||"groupStageBrackets"in r&&!t(r.groupStageBrackets)&&!k(r.groupStageBrackets)||"maxSetsBracket"in r&&!t(r.maxSetsBracket)&&!c(r.maxSetsBracket))return!1;break}case l.SWISS:{if(!p(r.schedule)||!c(r.totalRounds))return!1;break}}return!0}function R(r){return o(r)?r.filter(e=>L(e)):[]}function G(){return{loadAll(){try{const r=localStorage.getItem(u);return R(r?JSON.parse(r):[])}catch{return[]}},load(r){return this.loadAll().find(e=>e.id===r)??null},save(r){const e=this.loadAll(),s=e.findIndex(a=>a.id===r.id);s===-1?e.push(r):e[s]=r,localStorage.setItem(u,JSON.stringify(e))},delete(r){const e=this.loadAll().filter(s=>s.id!==r);localStorage.setItem(u,JSON.stringify(e))},deleteAll(){localStorage.setItem(u,"[]")}}}function j(r=G()){const e=new Set,s=new Map;function a(){for(const n of e)n()}return typeof window<"u"&&window.addEventListener("storage",n=>{n.storageArea===localStorage&&(n.key!==null&&n.key!==u||(s.clear(),a()))}),{save(n){s.set(n.id,n),r.save(n),a()},load(n){const b=s.get(n);if(b)return b;const S=r.load(n);return S&&s.set(n,S),S},loadAll(){return r.loadAll()},delete(n){s.delete(n),r.delete(n),a()},deleteAll(){s.clear(),r.deleteAll(),a()},subscribe(n){return e.add(n),()=>e.delete(n)}}}const J=j();export{J as p};
