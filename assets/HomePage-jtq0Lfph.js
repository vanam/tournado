import{r as l,j as e,u as S,h as F,L as v}from"./react-vendor-DmXkgcPG.js";import{p as x}from"./persistence-B3c2s67A.js";import{c as m,u as N,B as f,a as P}from"./index-D7lW7eDh.js";import{u as E}from"./usePageTitle-BmK_TMoc.js";import{B}from"./Badge-CcHu1U3O.js";import{T as H,P as j,c as $}from"./icons-CuKFc0l-.js";import{C as w}from"./ConfirmModal-BRauAu9A.js";import"./notifications-DgSurA1O.js";import"./radix-ui-BYwnsWBt.js";const y=l.forwardRef(({className:t,...r},a)=>e.jsx("div",{ref:a,className:m("rounded-xl border border-[var(--color-border)] bg-[var(--color-card)] shadow-sm",t),...r}));y.displayName="Card";const C=l.forwardRef(({className:t,...r},a)=>e.jsx("div",{ref:a,className:m("flex flex-col space-y-1.5 p-6",t),...r}));C.displayName="CardHeader";const b=l.forwardRef(({className:t,...r},a)=>e.jsx("div",{ref:a,className:m("text-2xl font-semibold leading-none tracking-tight",t),...r}));b.displayName="CardTitle";const D=l.forwardRef(({className:t,...r},a)=>e.jsx("div",{ref:a,className:m("text-sm text-muted-foreground",t),...r}));D.displayName="CardDescription";const T=l.forwardRef(({className:t,...r},a)=>e.jsx("div",{ref:a,className:m("p-6 pt-0",t),...r}));T.displayName="CardContent";const z=l.forwardRef(({className:t,...r},a)=>e.jsx("div",{ref:a,className:m("flex items-center p-6 pt-0",t),...r}));z.displayName="CardFooter";const K=({tournament:t,onDelete:r})=>{const{t:a}=N(),u=S(),h=t.winnerId?t.players.find(o=>o.id===t.winnerId):null,c=()=>{u(`/tournament/${t.id}`)};return e.jsxs(y,{className:`group cursor-pointer hover:shadow-lg hover:border-[var(--color-primary)] hover:-translate-y-0.5 transition-all duration-200${t.winnerId?" brightness-95":""}`,role:"button",tabIndex:0,onClick:c,onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),c())},children:[e.jsxs(C,{className:"p-5",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(b,{className:"text-lg font-semibold text-[var(--color-primary-dark)] group-hover:text-[var(--color-primary)] transition-colors",children:t.name}),e.jsx(f,{variant:"secondary-ghost",size:"sm",onClick:o=>{o.stopPropagation(),r(t.id)},"aria-label":a("card.delete"),className:"text-sm opacity-100 sm:opacity-0 sm:group-hover:opacity-100 h-8 w-8 px-2 py-1",children:e.jsx(H,{className:"h-4 w-4"})})]}),e.jsx(B,{variant:"secondary",className:"mt-2 w-fit",children:a(`format.${t.format}`)}),e.jsx(D,{className:"text-sm text-[var(--color-muted)] mt-1",children:a("tournament.players",{count:t.players.length})})]}),e.jsxs(T,{className:"p-5 pt-0",children:[e.jsx("p",{className:"text-xs text-[var(--color-subtle)]",children:a("card.created",{date:new Date(t.createdAt).toLocaleDateString()})}),h&&e.jsx("p",{className:"text-xs text-[var(--color-subtle)] font-medium mt-2",children:a("card.winner",{name:h.name})})]})]})},X=()=>{const t=F(),{tracker:r}=P();l.useEffect(()=>{r.trackPageView({})},[t,r]);const[a,u]=l.useState(()=>x.loadAll().toSorted((n,d)=>{const i=!!n.winnerId,g=!!d.winnerId;return i!==g?i?1:-1:new Date(d.createdAt).getTime()-new Date(n.createdAt).getTime()})),[h,c]=l.useState(!1),[o,p]=l.useState(null),{t:s}=N();l.useEffect(()=>x.subscribe(()=>{u(x.loadAll().toSorted((n,d)=>{const i=!!n.winnerId,g=!!d.winnerId;return i!==g?i?1:-1:new Date(d.createdAt).getTime()-new Date(n.createdAt).getTime()}))}),[]),E(s("home.title"));function A(n){return a.find(i=>i.id===n)?.name??""}function k(n){p(n)}function I(){o&&(x.delete(o),p(null))}function L(){p(null)}function R(){x.deleteAll(),c(!1)}return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-[var(--color-text)]",children:s("home.title")}),e.jsx("p",{className:"text-sm text-[var(--color-muted)] mt-1",children:s("home.cta")})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.length>1&&e.jsx(f,{onClick:()=>{c(!0)},variant:"secondary-outlined",children:s("home.deleteAll")}),e.jsx(f,{asChild:!0,children:e.jsxs(v,{to:"/create",className:"bg-[var(--color-primary)] text-[var(--color-surface)] px-5 py-2.5 rounded-lg text-sm font-medium shadow-sm hover:shadow-md hover:bg-[var(--color-primary-dark)] transition-colors inline-flex items-center gap-2",children:[e.jsx(j,{className:"h-4 w-4"})," ",s("home.newTournament")]})})]})]}),a.length===0?e.jsxs("div",{className:"text-center py-16 text-[var(--color-subtle)]",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx($,{className:"h-16 w-16 text-[var(--color-faint)]"})}),e.jsx("p",{className:"text-lg font-medium mb-3",children:s("home.noTournaments")}),e.jsx(f,{asChild:!0,children:e.jsxs(v,{to:"/create",className:"inline-flex items-center gap-2 bg-[var(--color-primary)] text-[var(--color-surface)] px-6 py-3 rounded-lg text-sm font-medium shadow-sm hover:shadow-md hover:bg-[var(--color-primary-dark)] transition-colors",children:[e.jsx(j,{className:"h-4 w-4"})," ",s("home.noTournamentsDesc")]})})]}):e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:a.map(n=>e.jsx(K,{tournament:n,onDelete:k},n.id))}),o&&e.jsx(w,{title:s("home.deleteConfirm"),message:A(o),confirmLabel:s("card.delete"),cancelLabel:s("home.cancel"),onConfirm:I,onCancel:L}),h&&e.jsx(w,{title:s("home.deleteAllConfirm"),message:s("home.deleteAllDesc",{count:a.length}),confirmLabel:s("home.deleteAll"),cancelLabel:s("home.cancel"),onConfirm:R,onCancel:()=>{c(!1)}})]})};export{X as HomePage};
