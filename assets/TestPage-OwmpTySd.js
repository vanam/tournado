import{u as U,r as o,j as e}from"./react-vendor-DmXkgcPG.js";import{B as C,D as b}from"./index-lbt8OJ0v.js";import{p as w}from"./persistence-DVdij_rs.js";import{L as c,I as p,c as P,a as D,b as F,g as A}from"./swissUtils-B-w6T2sR.js";import{c as K,g as W}from"./groupStageUtils-DGfeMiau.js";import{F as r,S as f,B as N}from"./ConfirmModal-p4Kc4V--.js";import"./notifications-DgSurA1O.js";import"./radix-ui-BYwnsWBt.js";import"./icons-CuKFc0l-.js";const M={[r.SINGLE_ELIM]:"Single elimination",[r.DOUBLE_ELIM]:"Double elimination",[r.ROUND_ROBIN]:"Round robin",[r.GROUPS_TO_BRACKET]:"Groups to bracket",[r.SWISS]:"Swiss"};function q(s,a){return Array.from({length:s},(d,n)=>({id:crypto.randomUUID(),name:String.fromCodePoint(65+n),seed:n+1,elo:a?1e3-n*10:void 0}))}function Q(s,a,d,n,h,m){const i={id:crypto.randomUUID(),name:`${M[a]} - ${s.length} players`,scoringMode:d,maxSets:b,groupStageMaxSets:b,bracketMaxSets:b,players:s.map(l=>({...l})),createdAt:new Date().toISOString(),completedAt:null,winnerId:null};switch(a){case r.SINGLE_ELIM:return{...i,format:r.SINGLE_ELIM,bracket:A(s)};case r.DOUBLE_ELIM:return{...i,format:r.DOUBLE_ELIM,doubleElim:W(s)};case r.ROUND_ROBIN:return{...i,format:r.ROUND_ROBIN,schedule:F(s)};case r.GROUPS_TO_BRACKET:{const l=Array.from({length:n},()=>h),S=K(s,{groupCount:n,qualifiers:l,consolation:!1,bracketType:m});return{...i,format:r.GROUPS_TO_BRACKET,groupStage:S,groupStagePlayoffs:null}}case r.SWISS:return{...i,format:r.SWISS,schedule:D(s),totalRounds:P(s.length)}}}const te=()=>{const s=U(),[a,d]=o.useState(r.SINGLE_ELIM),[n,h]=o.useState(f.SETS),[m,i]=o.useState(2),[l,S]=o.useState(9),[g,O]=o.useState(2),[j,T]=o.useState(2),[E,k]=o.useState(N.SINGLE_ELIM),[I,R]=o.useState(!1),[y,u]=o.useState(null),[v,_]=o.useState(null);function B(){if(u(null),_(null),m<2){u("Min players must be at least 2.");return}if(l>26){u("Max players must be at most 26.");return}if(m>l){u("Min players must not exceed max players.");return}const t=[];for(let x=m;x<=l;x++){if(a===r.GROUPS_TO_BRACKET&&x<g*2)continue;const G=q(x,a===r.SWISS&&I),L=Q(G,a,n,g,j,E);w.save(L),t.push(L.name)}if(t.length===0){u("No tournaments were created. Check your settings (e.g. min players vs group count).");return}_(t),s("/")}return e.jsxs("div",{className:"max-w-md",children:[e.jsx("h1",{className:"text-2xl font-bold text-[var(--color-text)] mb-6",children:"Test Tournament Generator"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"test-format",className:"block text-sm font-medium text-[var(--color-text)] mb-1",children:"Format"}),e.jsx("select",{id:"test-format",value:a,onChange:t=>{d(t.target.value)},className:"w-full border border-[var(--color-border)] rounded-lg px-3 py-2 text-sm bg-[var(--color-surface)] text-[var(--color-text)]",children:Object.values(r).map(t=>e.jsx("option",{value:t,children:M[t]},t))})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"test-scoring",className:"block text-sm font-medium text-[var(--color-text)] mb-1",children:"Scoring mode"}),e.jsxs("select",{id:"test-scoring",value:n,onChange:t=>{h(t.target.value)},className:"w-full border border-[var(--color-border)] rounded-lg px-3 py-2 text-sm bg-[var(--color-surface)] text-[var(--color-text)]",children:[e.jsx("option",{value:f.SETS,children:"Sets"}),e.jsx("option",{value:f.POINTS,children:"Points"})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"test-min",className:"block text-sm font-medium text-[var(--color-text)] mb-1",children:"Min players"}),e.jsx(p,{id:"test-min",type:"number",min:"2",max:"26",className:"w-24",value:m,onChange:t=>{i(Number.parseInt(t.target.value,10)||2)}})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"test-max",className:"block text-sm font-medium text-[var(--color-text)] mb-1",children:"Max players"}),e.jsx(p,{id:"test-max",type:"number",min:"2",max:"26",className:"w-24",value:l,onChange:t=>{S(Number.parseInt(t.target.value,10)||9)}})]}),a===r.GROUPS_TO_BRACKET&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"test-group-count",className:"block text-sm font-medium text-[var(--color-text)] mb-1",children:"Group count"}),e.jsx(p,{id:"test-group-count",type:"number",min:"1",className:"w-24",value:g,onChange:t=>{O(Math.max(1,Number.parseInt(t.target.value,10)||1))}})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"test-qualifiers",className:"block text-sm font-medium text-[var(--color-text)] mb-1",children:"Qualifiers per group"}),e.jsx(p,{id:"test-qualifiers",type:"number",min:"1",className:"w-24",value:j,onChange:t=>{T(Math.max(1,Number.parseInt(t.target.value,10)||1))}})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"test-bracket-type",className:"block text-sm font-medium text-[var(--color-text)] mb-1",children:"Bracket type"}),e.jsxs("select",{id:"test-bracket-type",value:E,onChange:t=>{k(t.target.value)},className:"w-full border border-[var(--color-border)] rounded-lg px-3 py-2 text-sm bg-[var(--color-surface)] text-[var(--color-text)]",children:[e.jsx("option",{value:N.SINGLE_ELIM,children:"Single elimination"}),e.jsx("option",{value:N.DOUBLE_ELIM,children:"Double elimination"})]})]})]}),a===r.SWISS&&e.jsxs(c,{className:"flex items-center gap-2 text-sm text-[var(--color-text)]",children:[e.jsx("input",{type:"checkbox",checked:I,onChange:t=>{R(t.target.checked)}}),"Use ELO"]}),y!==null&&e.jsx("p",{className:"text-[var(--color-accent)] text-sm",children:y}),e.jsx(C,{type:"button",onClick:B,className:"w-full bg-[var(--color-primary)] text-[var(--color-surface)] py-3 rounded-lg font-medium shadow-sm hover:shadow-md hover:bg-[var(--color-primary-dark)] active:scale-[0.99]",children:"Generate tournaments"}),v!==null&&e.jsxs("div",{className:"text-sm text-[var(--color-text)]",children:[e.jsxs("p",{className:"font-medium mb-1",children:["Created ",v.length," tournament(s):"]}),e.jsx("ul",{className:"list-disc list-inside space-y-0.5",children:v.map(t=>e.jsx("li",{children:t},t))})]})]})]})};export{te as TestPage};
